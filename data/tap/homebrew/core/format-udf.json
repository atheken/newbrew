{
  "name": "format-udf",
  "full_name": "format-udf",
  "tap": "homebrew/core",
  "oldname": null,
  "oldnames": [],
  "aliases": [],
  "versioned_formulae": [],
  "desc": "Bash script to format a block device to UDF",
  "license": "GPL-2.0",
  "homepage": "https://github.com/JElchison/format-udf",
  "versions": {
    "stable": "1.8.0",
    "head": null,
    "bottle": true
  },
  "urls": {
    "stable": {
      "url": "https://github.com/JElchison/format-udf/archive/1.8.0.tar.gz",
      "tag": null,
      "revision": null,
      "checksum": "52854097db9044d729fbd7cff012f4b554df01c15225ee17ec159c71da174c8d"
    }
  },
  "revision": 0,
  "version_scheme": 0,
  "bottle": {
    "stable": {
      "rebuild": 0,
      "root_url": "https://ghcr.io/v2/homebrew/core",
      "files": {
        "all": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/format-udf/blobs/sha256:b108eb2ba15d5bcf6458a29f6f05e57f9629370d4677f4e09930aad406f92da6",
          "sha256": "b108eb2ba15d5bcf6458a29f6f05e57f9629370d4677f4e09930aad406f92da6"
        }
      }
    }
  },
  "keg_only": false,
  "keg_only_reason": null,
  "options": [],
  "build_dependencies": [],
  "dependencies": [],
  "test_dependencies": [],
  "recommended_dependencies": [],
  "optional_dependencies": [],
  "uses_from_macos": [],
  "uses_from_macos_bounds": [],
  "requirements": [],
  "conflicts_with": [],
  "conflicts_with_reasons": [],
  "link_overwrite": [],
  "caveats": null,
  "installed": [],
  "linked_keg": null,
  "pinned": false,
  "outdated": false,
  "deprecated": false,
  "deprecation_date": null,
  "deprecation_reason": null,
  "disabled": false,
  "disable_date": null,
  "disable_reason": null,
  "post_install_defined": false,
  "service": null,
  "tap_git_head": "4eeae4ea50839e967536ba646d5e0ed6fbcbad7f",
  "ruby_source_path": "Formula/format-udf.rb",
  "ruby_source_checksum": {
    "sha256": "01abc587120033ff5c81536ca1a9f81b41693da2ef1fa067a3b1b6669d93ee4c"
  },
  "date_added": "2016-06-01T13:03:58+01:00",
  "readme": "format-udf\n==========\n\nBash script to format a block device (hard drive or Flash drive) in UDF. The output is a drive that can be used for reading/writing across multiple operating system families: Windows, macOS, and Linux. This script should be capable of running in macOS or in Linux.\n\n[![Build Status](https://travis-ci.org/JElchison/format-udf.svg?branch=master)](https://travis-ci.org/JElchison/format-udf)\n\n\n# Features\n* Formats a block device (hard drive or Flash drive) in <a href=\"https://en.wikipedia.org/wiki/Universal_Disk_Format\">Universal Disk Format (UDF)</a>\n    * UDF revision 2.01 used for maximal compatibility (see note on Linux support below)\n* Resulting file system can be read/written across multiple operating system families (Windows, macOS, and Linux)\n* Runs on any OS having a Bash environment\n* Optionally wipes device before formatting\n* Ability to override detected device block size\n* Option to force non-interactive mode (useful for scripting)\n* Writes a fake MBR for added compatibility on Windows (optionally disabled)\n\nFor the advanced user, format-udf is also capable of formatting a single existing partition, without modifying the partition table.  Beware that using this method will render the newly formatted UDF partition unusable on macOS (but still usable on Linux and Windows).  (See [#24](https://github.com/JElchison/format-udf/issues/24) for caveats.)  Because of this limitation, the recommendation is to format the entire device.\n\n\n# Why?\nformat-udf was created to address some OS-specific quirks that prevent a naively-formatted UDF device from working across various operating systems.  Here are some of the complicating factors, which format-udf aims to abstract away:\n\n* Different operating systems support different versions of the UDF specification.  Some OS versions only offer read-only support.\n* Windows seems to only mount UDF devices if the file system block size matches the device's logical block size\n* Different operating systems (like Windows XP) only attempt mounting UDF file systems with a hard-coded block size\n* Windows does not support hard disks without a partition table.  (This is strange because Windows does not apply the same limitation to flash drives.)\n* macOS seems to only mount UDF file systems that utilize the full disk (not just a partition)\n\nAt first glance, these constraints appear to be in partial conflict.  The solution, as suggested by [Pieter](https://web.archive.org/web/20151103171649/http://sipa.ulyssis.org/2010/02/filesystems-for-portable-disks/), is to place a fake partition table (via [MBR](https://en.wikipedia.org/wiki/Master_boot_record)) in the first block of the drive, which lists a single entire-disk partition.  This works because UDF (perhaps intentionally) doesn't utilize the first block.  Unfortunately, there has been no easy way to do this, while juggling all of the other variables (such as device logical block size).  format-udf writes such a fake MBR for added compatibility on Windows.  If this is not what you desire, you can disable the MBR with `-p none`.\n\nThe goal of this project is to **provide access to a cross-platform file system with modern features**, in such a way that is:\n1. Easy to use for the average user\n2. Maximally compatible across operating systems\n3. As compliant as is reasonable with the UDF specification\n4. Maximally flexible to help users with uncommon needs\n\n\n# UDF OS Support\nNot all operating systems support UDF.  The following tables detail operating system support for UDF.  Data was adapted from https://en.wikipedia.org/wiki/Universal_Disk_Format#Compatibility (as retrieved on 2017-06-16).\n\n### Natively Supported\nBoth read/write are supported unless otherwise listed below.\n\nOperating System             |Read-only                                                                           |Note\n-----------------------------|------------------------------------------------------------------------------------|----\nWindows XP, Server 2003      |Read-only                                                                           |Write support available with third party utilities\nWindows Vista, 7, 8, 10      |                                                                                    |Referred to by Microsoft as \"Live File System\"; Requires fake full-disk partition\nMac OS 9                     |                                                                                    |\nMac OS X 10.5 through 10.11  |                                                                                    |\nmacOS 10.12+                 |                                                                                    |\nLinux 2.6+, 3.x              |UDF revisions 2.01 and before have read/write.  After UDF revision 2.01, read-only. |\nAIX 5.2, 5.3, 6.1            |                                                                                    |\nBeOS, magnussoft ZETA, Haiku |                                                                                    |\nDosBox                       |                                                                                    |\neComStation, OS/2            |                                                                                    |Additional-fee drivers on OS/2\nNetBSD 5.0                   |                                                                                    |\nSolaris 8, 9, 10             |                                                                                    |\n\n\n### Supported with Third-Party Utilities\n\nOperating System     |Note\n---------------------|----\nWindows 95 OSR2+, 98 |Utilities include DLA and InCD\nWindows 2000, ME     |\n\n\n### Not Supported\n\nOperating System                    |Note\n------------------------------------|----\nDOS, FreeDOS, Windows 3.11 or older |File systems that have an ISO9660 backward compatibility structure can be read\n\n\n# 4K Drive Support\nNot all operating systems support 4K drives ([Advanced Format](https://en.wikipedia.org/wiki/Advanced_Format)).  If you operating system supports UDF, but not your 4K drive, you still may encounter issues using format-udf.\n\n### Windows 4K Drive Support\nThe following tables detail Windows support for 4K drives.  Data was adapted from the [Microsoft support policy for 4K sector hard drives in Windows](https://support.microsoft.com/en-us/help/2510009/microsoft-support-policy-for-4k-sector-hard-drives-in-windows) (as retrieved on 2017-06-16).  Overlaid into this table are testing results from the format-udf community.  (Special thanks to [@pali](https://github.com/pali) for his [testing on XP](https://github.com/JElchison/format-udf/issues/13#issuecomment-302904564).)\n\nSize / OS                                             |512-byte native                                                                                 |[512 emulation](https://en.wikipedia.org/wiki/Advanced_Format#512e)<br>(AKA \"512e\")                      |[4K native](https://en.wikipedia.org/wiki/Advanced_Format#4K_native)<br>(AKA \"4Kn\")\n------------------------------------------------------|------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------\nLogical block size                                    |512 bytes                                                                                       |512 bytes                                                                                                |4096 bytes\nPhysical block size                                   |512 bytes                                                                                       |4096 bytes                                                                                               |4096 bytes\n**Maximum UDF file<br>system capacity**               |**2 TiB**                                                                                       |**2 TiB**                                                                                                |**16 TiB**\nWindows XP                                            |Supported;<br>[Works](https://github.com/JElchison/format-udf/issues/13#issuecomment-302904564) |Unsupported;<br>[Doesn't work](https://github.com/JElchison/format-udf/issues/13#issuecomment-302904564) |Unsupported;<br>[Doesn't work](https://github.com/JElchison/format-udf/issues/13#issuecomment-302904564)\nWindows XP Pro x64,<br>Server 2003,<br>Server 2003 R2 |Supported;<br>Likely works but untested                                                         |Unsupported                                                                                              |Unsupported\nWindows Vista,<br>Server 2008                         |Supported;<br>Likely works but untested                                                         |Supported;<br>Likely works but untested                                                                  |Unsupported\nWindows 7,<br>Server 2008 R2                          |Supported;<br>Likely works but untested                                                         |Supported;<br>Likely works but untested                                                                  |Unsupported\nWindows 8,<br>Server 2012                             |Supported;<br>Likely works but untested                                                         |Supported;<br>Likely works but untested                                                                  |Supported;<br>Likely works but untested\nWindows 8.1,<br>Server 2012 R2                        |Supported;<br>Likely works but untested                                                         |Unsupported                                                                                              |Unsupported\nWindows 10,<br>Server 2016                            |Supported;<br>Likely works but untested                                                         |Unsupported                                                                                              |Supported;<br>Likely works but untested\n\nIf you have conducted testing and would like to update this table to benefit future users of format-udf, please send a pull request.  Please include a link to your raw data or testing results.\n\n\n# Environment\n* Any OS having a Bash environment\n* The following tools must be installed, executable, and in the PATH:\n    * `printf`\n    * `xxd`\n    * *One* of the following:  `blockdev`, `ioreg`\n    * *One* of the following:  `blockdev`, `diskutil`\n    * *One* of the following:  `lsblk`, `diskutil`\n    * *One* of the following:  `umount`, `diskutil`\n    * *One* of the following:  `mkudffs`, `newfs_udf`\n\n\n# Prerequisites\nTo install necessary prerequisites on Ubuntu:\n\n    sudo apt-get install udftools coreutils vim-common\n\n\n# Installation\nformat-udf is a self-contained script.  Simply copy format-udf.sh to a directory of your choosing.  Don't forget to make it executable:\n\n    chmod +x format-udf.sh\n\n\n# Usage\n```\nBash script to format a block device (hard drive or Flash drive) in UDF.\nThe output is a drive that can be used for reading/writing across multiple\noperating system families: Windows, macOS, and Linux.\nThis script should be capable of running in macOS or in Linux.\n\nUsage:  ./format-udf.sh [-b BLOCK_SIZE] [-f] [-p PARTITION_TYPE] [-w WIPE_METHOD] device label\n        ./format-udf.sh -v\n        ./format-udf.sh -h\n\n    -b BLOCK_SIZE\n        Block size to be used during format operation.\n        If absent, defaults to value reported by blockdev/diskutil.\n        This is an expert-only option.  Please consult the README for details.\n\n    -f\n        Forces non-interactive mode.  Useful for scripting.\n        Please use with caution, as no user confirmation is given.\n\n    -h\n        Display help information and exit.\n\n    -p PARTITION_TYPE\n        Partition type to set during format operation.\n        Currently supported types include:  mbr, none\n            mbr  - Master boot record (default)\n            none - Do not modify partitions\n        If absent, defaults to 'mbr'.\n        See also:\n            https://github.com/JElchison/format-udf#why\n\n    -v\n        Display version information and exit.\n\n    -w WIPE_METHOD\n        Wipe method to be used before format operation.\n        Currently supported types include:  quick, zero, scrub\n            quick - Quick method (default)\n            zero  - Write zeros to the entire device\n            scrub - Iteratively writes patterns on device\n                    to make retrieving the data more difficult.\n                    Requires 'scrub' to be executable and in the PATH.\n                    See also http://linux.die.net/man/1/scrub\n        If absent, defaults to 'quick'.\n        Note:  'zero' and 'scrub' methods will take a long time.\n\n    device\n        Device to format.  Examples:\n          * /dev/sdx   (Linux, where 'x' is a letter) or\n          * /dev/diskN (macOS, where 'N' is a number)\n\n    label\n        Label to apply to formatted device.\n\nExample:  ./format-udf.sh /dev/sdg \"My UDF External Drive\"\n```\n\n\n### Example usage\nOn Ubuntu:\n```\nuser@computer:~$ ./format-udf.sh /dev/sdg \"My UDF External Drive\"\n[+] Validating arguments...\n[+] Testing dependencies...\n[+] Looking for drive detail tool... using /sbin/blockdev\n[+] Looking for drive listing tool... using /sbin/blockdev\n[+] Looking for drive info tool... using /bin/lsblk\n[+] Looking for drive summary tool... using /sbin/blkid\n[+] Looking for unmount tool... using /bin/umount\n[+] Looking for UDF tool... using /usr/sbin/mkudffs\n[+] Detecting logical block size...\n[sudo] password for user:\n[*] Detected logical block size of 512\n[+] Validating detected logical block size...\n[+] Detecting physical block size...\n[*] Detected physical block size of 512\n[+] Validating detected physical block size...\n[+] Validating file system block size...\n[*] Using file system block size of 512\n[+] Detecting total size...\n[*] Detected total size of 8019509248\n[+] Validating detected total size...\n[+] Gathering drive information...\n/dev/sdg: LABEL=\"Old Drive\" UUID=\"4843-D1BD\" TYPE=\"vfat\"\n\nRO    RA   SSZ   BSZ   StartSec            Size   Device\nrw   256   512   512          0      8019509248   /dev/sdg\nThe above-listed device (and partitions, if any) will be completely erased.\nType 'yes' if this is what you intend:  yes\n[+] Unmounting device...\numount: /dev/sdg: not mounted\n[+] Zeroing out first chunk of device...\n4096+0 records in\n4096+0 records out\n2097152 bytes (2.1 MB, 2.0 MiB) copied, 0.450716 s, 4.7 MB/s\n[+] Formatting /dev/sdg ...\nfilename=/dev/sdg\nlabel=My UDF External Drive\nuuid=5e4924cc17b50769\nblocksize=512\nblocks=15663104\nudfrev=2.01\nstart=0, blocks=64, type=ERASE \nstart=64, blocks=13, type=VRS \nstart=77, blocks=19, type=ERASE \nstart=96, blocks=16, type=MVDS \nstart=112, blocks=16, type=ERASE \nstart=128, blocks=16, type=LVID \nstart=144, blocks=112, type=ERASE \nstart=256, blocks=1, type=ANCHOR \nstart=257, blocks=15662590, type=PSPACE \nstart=15662847, blocks=1, type=ANCHOR \nstart=15662848, blocks=96, type=ERASE \nstart=15662944, blocks=16, type=RVDS \nstart=15662960, blocks=143, type=ERASE \nstart=15663103, blocks=1, type=ANCHOR \n[+] Writing fake MBR...\n16+0 records in\n16+0 records out\n16 bytes copied, 0.0037039 s, 4.3 kB/s\n2+0 records in\n2+0 records out\n2 bytes copied, 3.7193e-05 s, 53.8 kB/s\n[+] Successfully formatted /dev/sdg: UUID=\"5e4924cc17b50769\" LABEL=\"My UDF External Drive\" TYPE=\"udf\" PTTYPE=\"dos\"\nPlease disconnect/reconnect your drive now.\n```\n\nOn macOS:\n```\ncomputer:~ user$ ./format-udf.sh /dev/disk4 \"My UDF External Drive\"\n[+] Validating arguments...\n[+] Testing dependencies...\n[+] Looking for drive detail tool... using /usr/sbin/ioreg\n[+] Looking for drive listing tool... using /usr/sbin/diskutil\n[+] Looking for drive info tool... using /usr/sbin/diskutil\n[+] Looking for drive summary tool... using (none)\n[+] Looking for unmount tool... using /usr/sbin/diskutil\n[+] Looking for UDF tool... using /sbin/newfs_udf\n[+] Detecting logical block size...\n[*] Detected logical block size of 512\n[+] Validating detected logical block size...\n[+] Detecting physical block size...\n[+] Validating file system block size...\n[*] Using file system block size of 512\n[+] Detecting total size...\n[*] Detected total size of 8019509248\n[+] Validating detected total size...\n[+] Gathering drive information...\n/dev/disk4 (external, physical):\n   #:                       TYPE NAME                    SIZE       IDENTIFIER\n   0:     FDisk_partition_scheme                        *8.0 GB     disk4\n   1:             Windows_FAT_32 Old Drive               8.0 GB     disk4s1\nThe above-listed device (and partitions, if any) will be completely erased.\nType 'yes' if this is what you intend:  yes\n[+] Unmounting device...\nPassword:\nUnmount of all volumes on disk4 was successful\n[+] Zeroing out first chunk of device...\n4096+0 records in\n4096+0 records out\n2097152 bytes transferred in 3.113956 secs (673469 bytes/sec)\n[+] Formatting /dev/disk4 ...\nwrite to block device: /dev/disk4  last written block address: 15663103\n[+] Writing fake MBR...\n16+0 records in\n16+0 records out\n16 bytes transferred in 0.000615 secs (26021 bytes/sec)\n2+0 records in\n2+0 records out\n2 bytes transferred in 0.000644 secs (3106 bytes/sec)\n[+] Successfully formatted \nPlease disconnect/reconnect your drive now.\n```\n\n# Caveats\n\n### Block Size\nIf's extremely important that format-udf use the correct block size when formatting your drive.  format-udf will attempt to detect and use the correct (logical) block size.  If you know what you're doing, the format-udf `-b BLOCK_SIZE` option can be used to explicitly override the detected block size value.\n\nIf the wrong block size is used while formatting (i.e. one that doesn't match the logical block size of your drive), the resultant drive will likely have OS compatibility issues and suffer from non-optimal performance issues.\n\nIn the same way, it's just as important that the resultant drive be mounted using the correct block size.  Many operating systems will only attempt one block size (usually whatever the mount utility defaults to).  For example, In order to mount a UDF device, Windows seems to require that the UDF file system use a block size equal to the logical block size.  If your block size isn't the OS's default, then auto-mounting likely will not work on your OS.  While a small nuisance, manual mounting attempts should still succeed for nonstandard block sizes.\n\nExample of how to manually mount on Linux:\n```\n$ mount -t udf -o bs=4096 /dev/sdX /mnt/mount-point\n```\n\nExample of how to manually mount on macOS:\n```\n$ sudo mount_udf -b 4096 /dev/diskN /Volumes/MountPoint\n```\n\nSadly, anything with block size different than 512 doesn't seem to mount on Windows XP.\n\nFor more info, see [#12](https://github.com/JElchison/format-udf/issues/12), [#13](https://github.com/JElchison/format-udf/issues/13), [#16](https://github.com/JElchison/format-udf/issues/16), and [#31](https://github.com/JElchison/format-udf/issues/31).\n\n### Maximum UDF File System Capacity\nThe UDF format has a maximum of 2^32 blocks.  With format-udf, these blocks equate to logical blocks.\n\n* If your drive's logical block size is 512 bytes, then your maximum UDF file system capacity will be 2 TiB\n* If your drive's logical block size is 4096 bytes, then your maximum UDF file system capacity will be 16 TiB\n\nIf your drive has capacity in excess of this maximum size, the extra capacity will not be used.  This is a limitation of UDF itself.\n\n### For Best Results\nFor maximal OS compatibility, use format-udf on a device having a logical block size of 512 bytes.  This will limit your total capacity to 2 TiB, but the resultant device should work on the most operating systems.\n\nFor maximal resultant UDF file system capacity, use use format-udf on a device having a logical block size of 4096 bytes.  This will increase your total capacity (from 2 TiB) to 16 TiB, but will limit the number/types of operating systems that will be able to mount/read/write the resultant device.  See compatibility tables above for more detail.\n\nFor a human-readable device label, use format-udf in one of the following configurations:\n* Run format-udf on Linux\n* Run format-udf on macOS, but modify the drive label using Linux or Windows\n\n### Miscellaneous Tips\n\n* After installing GRUB2 on a partitionless drive, you can use `fdisk` to set the partition as active if your BIOS can't boot from partitionless drives. (Thanks to [@tome-](https://github.com/tome-) for the tip.)\n\n### Contributions\n\n* Thanks to [@walterav1984](https://github.com/walterav1984) for his contribution to add NVMe support\n\n\n# See Also\n\n* [Filesystems for portable disks](https://web.archive.org/web/20151103171649/http://sipa.ulyssis.org/2010/02/filesystems-for-portable-disks/)\n* [Universal Disk Format on Wikipedia](https://en.wikipedia.org/wiki/Universal_Disk_Format)\n* [Wenguang's Introduction to Universal Disk Format (UDF)](https://sites.google.com/site/udfintro/)\n* [UDF Specifications](http://www.osta.org/specs/)\n* [Sharing a Hard/Flash Drive Across Windows, OS X, and Linux with UDF](https://j0nam1el.wordpress.com/2015/02/20/sharing-a-hardflash-drive-across-windows-os-x-and-linux-with-udf/)"
}
