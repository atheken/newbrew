{
  "name": "pumba",
  "full_name": "pumba",
  "tap": "homebrew/core",
  "oldname": null,
  "oldnames": [],
  "aliases": [],
  "versioned_formulae": [],
  "desc": "Chaos testing tool for Docker",
  "license": "Apache-2.0",
  "homepage": "https://github.com/alexei-led/pumba",
  "versions": {
    "stable": "0.9.7",
    "head": "HEAD",
    "bottle": true
  },
  "urls": {
    "stable": {
      "url": "https://github.com/alexei-led/pumba/archive/0.9.7.tar.gz",
      "tag": null,
      "revision": null,
      "checksum": "844f600da305577db726cd2b97295608641a462a5e1c457de14af216e4540fe4"
    },
    "head": {
      "url": "https://github.com/alexei-led/pumba.git",
      "branch": "master"
    }
  },
  "revision": 0,
  "version_scheme": 0,
  "bottle": {
    "stable": {
      "rebuild": 1,
      "root_url": "https://ghcr.io/v2/homebrew/core",
      "files": {
        "arm64_ventura": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/pumba/blobs/sha256:e8e7c60bcc9a1b2c6eea9316b9e60fe63d25b22517c4dbc25eb60698792e46f2",
          "sha256": "e8e7c60bcc9a1b2c6eea9316b9e60fe63d25b22517c4dbc25eb60698792e46f2"
        },
        "arm64_monterey": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/pumba/blobs/sha256:e8e7c60bcc9a1b2c6eea9316b9e60fe63d25b22517c4dbc25eb60698792e46f2",
          "sha256": "e8e7c60bcc9a1b2c6eea9316b9e60fe63d25b22517c4dbc25eb60698792e46f2"
        },
        "arm64_big_sur": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/pumba/blobs/sha256:e8e7c60bcc9a1b2c6eea9316b9e60fe63d25b22517c4dbc25eb60698792e46f2",
          "sha256": "e8e7c60bcc9a1b2c6eea9316b9e60fe63d25b22517c4dbc25eb60698792e46f2"
        },
        "ventura": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/pumba/blobs/sha256:711eded2ec27e8031c01a2f3a6a9a63fe68c14b6e3cf675046a410513ff59661",
          "sha256": "711eded2ec27e8031c01a2f3a6a9a63fe68c14b6e3cf675046a410513ff59661"
        },
        "monterey": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/pumba/blobs/sha256:711eded2ec27e8031c01a2f3a6a9a63fe68c14b6e3cf675046a410513ff59661",
          "sha256": "711eded2ec27e8031c01a2f3a6a9a63fe68c14b6e3cf675046a410513ff59661"
        },
        "big_sur": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/pumba/blobs/sha256:711eded2ec27e8031c01a2f3a6a9a63fe68c14b6e3cf675046a410513ff59661",
          "sha256": "711eded2ec27e8031c01a2f3a6a9a63fe68c14b6e3cf675046a410513ff59661"
        },
        "x86_64_linux": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/pumba/blobs/sha256:8b16b399d1f49ea2f930f8ed45066528b1916d0423b2aa84f934a1e530a70c40",
          "sha256": "8b16b399d1f49ea2f930f8ed45066528b1916d0423b2aa84f934a1e530a70c40"
        }
      }
    }
  },
  "keg_only": false,
  "keg_only_reason": null,
  "options": [],
  "build_dependencies": [
    "go"
  ],
  "dependencies": [],
  "test_dependencies": [],
  "recommended_dependencies": [],
  "optional_dependencies": [],
  "uses_from_macos": [],
  "uses_from_macos_bounds": [],
  "requirements": [],
  "conflicts_with": [],
  "conflicts_with_reasons": [],
  "link_overwrite": [],
  "caveats": null,
  "installed": [],
  "linked_keg": null,
  "pinned": false,
  "outdated": false,
  "deprecated": false,
  "deprecation_date": null,
  "deprecation_reason": null,
  "disabled": false,
  "disable_date": null,
  "disable_reason": null,
  "post_install_defined": false,
  "service": null,
  "tap_git_head": "4eeae4ea50839e967536ba646d5e0ed6fbcbad7f",
  "ruby_source_path": "Formula/pumba.rb",
  "ruby_source_checksum": {
    "sha256": "76df3e78e664b2cf78735cec10c015d51bed3ca439a76b5d40f7c6b23e1f4a8f"
  },
  "date_added": "2017-08-03T09:14:21-07:00",
  "readme": "# Pumba: chaos testing tool for Docker [![Tweet](https://img.shields.io/twitter/url/http/shields.io.svg?style=social)](https://twitter.com/intent/tweet?text=Breaking%20Docker%20containers%20on%20purpose%20with%20Pumba&url=https://github.com/alexei-led/pumba&via=alexeiled&hashtags=docker,chaosengineering,chaos,breakthingsonpurpose,kubernetes)\n\nPumba is a chaos testing command line tool for Docker containers. Pumba disturbs your containers by crashing containerized application, emulating network failures and stress-testing container resources (cpu, memory, fs, io, and others).\n\n![GitHub release (latest SemVer)](https://img.shields.io/github/v/release/alexei-led/pumba) [![](https://github.com/alexei-led/pumba/workflows/Pumba%20CI/badge.svg)](https://github.com/alexei-led/pumba/actions?query=workflow%3A\"Pumba+CI\") [![Go Report Card](https://goreportcard.com/badge/github.com/alexei-led/pumba)](https://goreportcard.com/report/github.com/alexei-led/pumba) [![codecov](https://codecov.io/gh/alexei-led/pumba/branch/master/graph/badge.svg)](https://codecov.io/gh/alexei-led/pumba) [![](https://images.microbadger.com/badges/image/gaiaadm/pumba.svg)](http://microbadger.com/images/gaiaadm/pumba) [![](https://images.microbadger.com/badges/version/gaiaadm/pumba.svg)](http://microbadger.com/images/gaiaadm/pumba) \n\n\n![pumba](docs/img/pumba_logo.png \"They CALL me... MISTER PIG!\")\n\n## Prerequisites\n\n**Important:**: Minimal required Docker version `v18.06.0`.\n\n## Demo\n\n[![asciicast](https://asciinema.org/a/82428.png)](https://asciinema.org/a/82428)\n\n## Usage\n\nYou can download Pumba binary for your OS from [release](https://github.com/alexei-led/pumba/releases) page.\n\n```text\n$ pumba help\n\nPumba version [VERSION](./blob/master/VERSION)\nNAME:\n   Pumba - Pumba is a resilience testing tool, that helps applications tolerate random Docker container failures: process, network and performance.\n\nUSAGE:\n   pumba [global options] command [command options] containers (name, list of names, RE2 regex)\n\nVERSION:\n   [VERSION](./blob/master/VERSION) - `git rev-parse HEAD --short` and `build time`\n\nCOMMANDS:\n     kill     kill specified containers\n     netem    emulate the properties of wide area networks\n     pause    pause all processes\n     stop     stop containers\n     rm       remove containers\n     help, h  Shows a list of commands or help for one command\n\nGLOBAL OPTIONS:\n   --host value, -H value      daemon socket to connect to (default: \"unix:///var/run/docker.sock\") [$DOCKER_HOST]\n   --tls                       use TLS; implied by --tlsverify\n   --tlsverify                 use TLS and verify the remote [$DOCKER_TLS_VERIFY]\n   --tlscacert value           trust certs signed only by this CA (default: \"/etc/ssl/docker/ca.pem\")\n   --tlscert value             client certificate for TLS authentication (default: \"/etc/ssl/docker/cert.pem\")\n   --tlskey value              client key for TLS authentication (default: \"/etc/ssl/docker/key.pem\")\n   --log-level value, -l value  set log level (debug, info, warning(*), error, fatal, panic) (default: \"warning\") [$LOG_LEVEL]\n   --json                      produce log in JSON format: Logstash and Splunk friendly\n   --slackhook value           web hook url; send Pumba log events to Slack\n   --slackchannel value        Slack channel (default #pumba) (default: \"#pumba\")\n   --interval value, -i value  recurrent interval for chaos command; use with optional unit suffix: 'ms/s/m/h'\n   --label value               filter containers by labels, e.g '--label key=value' (multiple labels supported)\n   --random, -r                randomly select single matching container from list of target containers\n   --dry-run                   does not create chaos, only logs planned chaos commands\n   --help, -h                  show help\n   --version, -v               print the version\n```\n\n### Kill Container command\n\n```text\npumba kill -h\n\nNAME:\n   pumba kill - kill specified containers\n\nUSAGE:\n   pumba [global options] kill [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   send termination signal to the main process inside target container(s)\n\nOPTIONS:\n   --signal value, -s value  termination signal, that will be sent by Pumba to the main process inside target container(s) (default: \"SIGKILL\")\n   --limit value, -l value   limit to number of container to kill (0: kill all matching) (default: 0)\n```\n\n### Pause Container command\n\n```text\npumba pause -h\n\nNAME:\n   pumba pause - pause all processes\n\nUSAGE:\n   pumba pause [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   pause all running processes within target containers\n\nOPTIONS:\n   --duration value, -d value  pause duration: should be smaller than recurrent interval; use with optional unit suffix: 'ms/s/m/h'\n```\n\n### Stop Container command\n\n```text\npumba stop -h\nNAME:\n   pumba stop - stop containers\n\nUSAGE:\n   pumba stop [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   stop the main process inside target containers, sending  SIGTERM, and then SIGKILL after a grace period\n\nOPTIONS:\n   --time value, -t value  seconds to wait for stop before killing container (default 10) (default: 10)\n```\n\n### Remove (rm) Container command\n\n```text\npumba rm -h\n\nNAME:\n   pumba rm - remove containers\n\nUSAGE:\n   pumba rm [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   remove target containers, with links and voluems\n\nOPTIONS:\n   --force, -f    force the removal of a running container (with SIGKILL, default: true)\n   --links, -l    remove container links (default: false)\n   --volumes, -v  remove volumes associated with the container (default: true)\n```\n\n### Network Emulation (netem) command\n\n```text\npumba netem -h\n\nNAME:\n   Pumba netem - delay, loss, duplicate and re-order (run 'netem') packets, to emulate different network problems\n\nUSAGE:\n   Pumba netem command [command options] [arguments...]\n\nCOMMANDS:\n     delay      delay egress traffic\n     loss\n     duplicate\n     corrupt\n     rate       limit egress traffic\n\nOPTIONS:\n   --duration value, -d value   network emulation duration; should be smaller than recurrent interval; use with optional unit suffix: 'ms/s/m/h'\n   --interface value, -i value  network interface to apply delay on (default: \"eth0\")\n   --target value, -t value     target IP filter; comma separated. netem will impact only on traffic to target IP(s)\n   --tc-image value             Docker image with tc (iproute2 package); try 'gaiadocker/iproute2'\n   --help, -h                   show help\n```\n\n#### Network Emulation Delay sub-command\n\n```text\npumba netem delay -h\n\nNAME:\n   Pumba netem delay - delay egress traffic\n\nUSAGE:\n   Pumba netem delay [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   delay egress traffic for specified containers; networks show variability so it is possible to add random variation; delay variation isn't purely random, so to emulate that there is a correlation\n\nOPTIONS:\n   --time value, -t value          delay time; in milliseconds (default: 100)\n   --jitter value, -j value        random delay variation (jitter); in milliseconds; example: 100ms ± 10ms (default: 10)\n   --correlation value, -c value   delay correlation; in percentage (default: 20)\n   --distribution value, -d value  delay distribution, can be one of {<empty> | uniform | normal | pareto |  paretonormal}\n```\n\n#### Network Emulation Loss sub-commands\n\n```text\npumba netem loss -h\n\nNAME:\n   Pumba netem loss - adds packet losses\n\nUSAGE:\n   Pumba netem loss [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   adds packet losses, based on independent (Bernoulli) probability model\n   see:  http://www.voiptroubleshooter.com/indepth/burstloss.html\n\nOPTIONS:\n   --percent value, -p value      packet loss percentage (default: 0)\n   --correlation value, -c value  loss correlation; in percentage (default: 0)\n```\n\n```text\npumba netem loss-state -h\n\nNAME:\n   Pumba netem loss-state - adds packet losses, based on 4-state Markov probability model\n\nUSAGE:\n   Pumba netem loss-state [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   adds a packet losses, based on 4-state Markov probability model\n     state (1) – packet received successfully\n     state (2) – packet received within a burst\n     state (3) – packet lost within a burst\n     state (4) – isolated packet lost within a gap\n   see: http://www.voiptroubleshooter.com/indepth/burstloss.html\n\nOPTIONS:\n   --p13 value  probability to go from state (1) to state (3) (default: 0)\n   --p31 value  probability to go from state (3) to state (1) (default: 100)\n   --p32 value  probability to go from state (3) to state (2) (default: 0)\n   --p23 value  probability to go from state (2) to state (3) (default: 100)\n   --p14 value  probability to go from state (1) to state (4) (default: 0)\n```\n\n```text\npumba netem loss-gemodel -h\n\nNAME:\n   Pumba netem loss-gemodel - adds packet losses, according to the Gilbert-Elliot loss model\n\nUSAGE:\n   Pumba netem loss-gemodel [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   adds packet losses, according to the Gilbert-Elliot loss model\n   see: http://www.voiptroubleshooter.com/indepth/burstloss.html\n\nOPTIONS:\n   --pg value, -p value  transition probability into the bad state (default: 0)\n   --pb value, -r value  transition probability into the good state (default: 100)\n   --one-h value         loss probability in the bad state (default: 100)\n   --one-k value         loss probability in the good state (default: 0)\n```\n\n```text\npumba netem rate -h\n\nNAME:\n   Pumba netem rate - rate limit egress traffic\n\nUSAGE:\n   Pumba netem rate [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   rate limit egress traffic for specified containers\n\nOPTIONS:\n   --rate value, -r value            delay outgoing packets; in common units (default: \"100kbit\")\n   --packetoverhead value, -p value  per packet overhead; in bytes (default: 0)\n   --cellsize value, -s value        cell size of the simulated link layer scheme (default: 0)\n   --celloverhead value, -c value    per cell overhead; in bytes (default: 0)\n```\n\n#### Network Emulation Duplicate sub-commands\n\n```text\npumba netem duplicate -h\n\nNAME:\n   Pumba netem duplicate - adds duplicate packets\n\nUSAGE:\n   Pumba netem duplicate [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   adds duplicate packets, based on independent (Bernoulli) probability model\n   see:  http://www.voiptroubleshooter.com/indepth/burstloss.html\n\nOPTIONS:\n   --percent value, -p value      packet duplicate percentage (default: 0)\n   --correlation value, -c value  duplicate correlation; in percentage (default: 0)\n```\n\n#### Network Emulation Corrupt sub-commands\n\n```text\npumba netem corrupt -h\n\nNAME:\n   Pumba netem corrupt - adds corrupt packets\n\nUSAGE:\n   Pumba netem corrupt [command options] containers (name, list of names, RE2 regex)\n\nDESCRIPTION:\n   adds corrupt packets, based on independent (Bernoulli) probability model\n   see:  http://www.voiptroubleshooter.com/indepth/burstloss.html\n\nOPTIONS:\n   --percent value, -p value      packet corrupt percentage (default: 0)\n   --correlation value, -c value  corrupt correlation; in percentage (default: 0)\n```\n\n##### Examples\n\n```text\n# add 3 seconds delay for all outgoing packets on device `eth0` (default) of `mydb` Docker container for 5 minutes\n\npumba netem --duration 5m delay --time 3000 mydb\n```\n\n```text\n# add a delay of 3000ms ± 30ms, with the next random element depending 20% on the last one,\n# for all outgoing packets on device `eth1` of all Docker container, with name start with `test`\n# for 5 minutes\n\npumba netem --duration 5m --interface eth1 delay \\\n      --time 3000 \\\n      --jitter 30 \\\n      --correlation 20 \\\n    \"re2:^test\"\n```\n\n```text\n# add a delay of 3000ms ± 40ms, where variation in delay is described by `normal` distribution,\n# for all outgoing packets on device `eth0` of randomly chosen Docker container from the list\n# for 5 minutes\n\npumba --random netem --duration 5m \\\n    delay \\\n      --time 3000 \\\n      --jitter 40 \\\n      --distribution normal \\\n    container1 container2 container3\n```\n\n```text\n# Corrupt 10% of the packets from the `mydb` Docker container for 5 minutes\n\npumba netem --duration 5m corrupt --percent 10 mydb\n```\n\n##### `tc` tool\n\nPumba uses `tc` Linux tool for network emulation. You have two options:\n\n1. Make sure that container, you want to disturb, has `tc` tool available and properly installed (install `iproute2` package)\n2. Use `--tc-image` option, with any `netem` command, to specify external Docker image with `tc` tool available. Pumba will create a new container from this image, adding `NET_ADMIN` capability to it and reusing target container network stack. You can try to use [gaiadocker/iproute2](https://hub.docker.com/r/gaiadocker/iproute2/) image (it's just Alpine Linux 3.3 with `iproute2` package installed)\n\n**Note:** For Alpine Linux based image, you need to install `iproute2` package and also to create a symlink pointing to distribution files `ln -s /usr/lib/tc /lib/tc`.\n\n### Stress testing Docker containers\n\nPumba can inject [stress-ng](https://kernel.ubuntu.com/~cking/stress-ng/) testing tool into a target container(s) `cgroup` and control stress test run.\n\n```text\nNAME:\n   pumba stress - stress test a specified containers\n\nUSAGE:\n   pumba stress [command options] containers (name, list of names, or RE2 regex if prefixed with \"re2:\")\n\nDESCRIPTION:\n   stress test target container(s)\n\nOPTIONS:\n   --duration value, -d value  stress duration: must be shorter than recurrent interval; use with optional unit suffix: 'ms/s/m/h'\n   --stress-image value        Docker image with stress-ng tool, cgroup-bin and docker packages, and dockhack script (default: \"alexeiled/stress-ng:latest-ubuntu\")\n   --pull-image                pull stress-image form Docker registry\n   --stressors value           stress-ng stressors; see https://kernel.ubuntu.com/~cking/stress-ng/ (default: \"--cpu 4 --timeout 60s\")\n```\n\n#### stress-ng image requirements\n\nPumba uses [alexeiled/stress-ng:latest-ubuntu](https://hub.docker.com/r/alexeiled/stress-ng/) `stress-ng` Ubuntu-based Docker image with statically linked `stress-ng` tool.\n\nYou can provide your own image, but it must include the following tools:\n\n1. `stress-ng` tool (in `$PATH`)\n1. Bash shell\n1. [`dockhack`](https://github.com/tavisrudd/dockhack) helper Bash script (in `$PATH`)\n1. `docker` client CLI tool (runnable without `sudo`)\n1. `cgexec` tool, available from `cgroups-tools` or/and `cgroup-bin` packages\n\n### Running inside Docker container\n\nIf you choose to use Pumba Docker [image](https://hub.docker.com/r/gaiaadm/pumba/) on Linux, use the following command:\n\n```text\n# run 10 Docker containers named test_(index)\nfor i in `seq 1 10`; do docker run -d --name test_$i --rm alpine tail -f /dev/null; done\n\n# once in a 10 seconds, try to kill (with `SIGKILL` signal) all containers named **test(something)**\n# on same Docker host, where Pumba container is running\n\n$ docker run -it --rm  -v /var/run/docker.sock:/var/run/docker.sock gaiaadm/pumba --interval=10s --random --log-level=info kill --signal=SIGKILL \"re2:^test\"\n\n```\n\n**Note:** from version `0.6` Pumba Docker image is a `scratch` Docker image, that contains only single `pumba` binary file and `ENTRYPOINT` set to the `pumba` command.\n\n**Note:** For Windows and OS X you will need to use `--host` argument, since there is no unix socket `/var/run/docker.sock` to mount.\n\n### Running Pumba on Kubernetes cluster\n\nIf you are running Kubernetes, you can take advantage of DaemonSets to automatically deploy the Pumba on selected K8s nodes, using `nodeSelector` or `nodeAffinity`, see [Assigning Pods to Nodes](https://kubernetes.io/docs/concepts/configuration/assign-pod-node/).\n\nYou'll then be able to deploy the DaemonSet with the command:\n\n```sh\nkubectl create -f deploy/pumba_kube.yml\n```\n\nK8s automatically assigns labels to Docker container, and you can use Pumba `--label` filter to create chaos for specific Pods and Namespaces.\n\nK8s auto-assigned container labels, than can be used by Pumba:\n\n```yaml\n\"io.kubernetes.container.name\": \"test-container\"\n\"io.kubernetes.pod.name\": \"test-pod\"\n\"io.kubernetes.pod.namespace\": \"test-namespace\"\n```\n\nIt's possible to run multiple Pumba commands in the same DaemonSet using multiple Pumba containers, see `deploy/pumba_kube.yml` example.\n\nIf you are not running Kubernetes >= 1.1.0 or do not want to use DaemonSets, you can also run the Pumba as a regular docker container on each node you want to make chaos (see above)\n\n**Note:** running `pumba netem` commands on minikube clusters will not work, because the sch_netem kernel module is missing in the minikube VM!\n\n## Build instructions\n\nYou can build Pumba with or without Go installed on your machine.\n\n### Build using local Go environment\n\nIn order to build Pumba, you need to have Go 1.6+ setup on your machine.\n\nHere is the approximate list of commands you will need to run:\n\n```sh\n# create required folder\ncd $GOPATH\nmkdir github.com/alexei-led && cd github.com/alexei-led\n\n# clone pumba\ngit clone git@github.com:alexei-led/pumba.git\ncd pumba\n\n# build pumba binary\nmake\n\n# run tests and create HTML coverage report\nmake test-coverage\n\n# create pumba binaries for multiple platforms\nmake release\n```\n\n### Build using Docker\n\nYou do not have to install and configure Go in order to build and test Pumba project. Pumba uses Docker multistage build to create final tiny Docker image.\n\nFirst of all clone Pumba git repository:\n\n```sh\ngit clone git@github.com:alexei-led/pumba.git\ncd pumba\n```\n\nNow create a new Pumba Docker image.\n\n```sh\nDOCKER_BUILDKIT=1 docker build -t pumba -f docker/Dockerfile .\n```\n\n## License\n\nCode is under the [Apache License v2](https://www.apache.org/licenses/LICENSE-2.0.txt)."
}
