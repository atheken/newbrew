{
  "name": "tproxy",
  "full_name": "tproxy",
  "tap": "homebrew/core",
  "oldname": null,
  "oldnames": [],
  "aliases": [],
  "versioned_formulae": [],
  "desc": "CLI tool to proxy and analyze TCP connections",
  "license": "MIT",
  "homepage": "https://github.com/kevwan/tproxy",
  "versions": {
    "stable": "0.7.3",
    "head": "HEAD",
    "bottle": true
  },
  "urls": {
    "stable": {
      "url": "https://github.com/kevwan/tproxy/archive/refs/tags/v0.7.3.tar.gz",
      "tag": null,
      "revision": null,
      "checksum": "b6b226525365f3ae510e34be9cb23831a61474959235c308b5cd9fc546aecda2"
    },
    "head": {
      "url": "https://github.com/kevwan/tproxy.git",
      "branch": "main"
    }
  },
  "revision": 0,
  "version_scheme": 0,
  "bottle": {
    "stable": {
      "rebuild": 0,
      "root_url": "https://ghcr.io/v2/homebrew/core",
      "files": {
        "arm64_ventura": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/tproxy/blobs/sha256:015bc38f0bd8c525a46a51d13a259cef1e26644ed95a7d515749d0a877dfb3d0",
          "sha256": "015bc38f0bd8c525a46a51d13a259cef1e26644ed95a7d515749d0a877dfb3d0"
        },
        "arm64_monterey": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/tproxy/blobs/sha256:015bc38f0bd8c525a46a51d13a259cef1e26644ed95a7d515749d0a877dfb3d0",
          "sha256": "015bc38f0bd8c525a46a51d13a259cef1e26644ed95a7d515749d0a877dfb3d0"
        },
        "arm64_big_sur": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/tproxy/blobs/sha256:015bc38f0bd8c525a46a51d13a259cef1e26644ed95a7d515749d0a877dfb3d0",
          "sha256": "015bc38f0bd8c525a46a51d13a259cef1e26644ed95a7d515749d0a877dfb3d0"
        },
        "ventura": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/tproxy/blobs/sha256:f6dca47ef57efa2caec4f07d1cfa9028bdbd2b158bd7693f4ec6b47f39ac925d",
          "sha256": "f6dca47ef57efa2caec4f07d1cfa9028bdbd2b158bd7693f4ec6b47f39ac925d"
        },
        "monterey": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/tproxy/blobs/sha256:f6dca47ef57efa2caec4f07d1cfa9028bdbd2b158bd7693f4ec6b47f39ac925d",
          "sha256": "f6dca47ef57efa2caec4f07d1cfa9028bdbd2b158bd7693f4ec6b47f39ac925d"
        },
        "big_sur": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/tproxy/blobs/sha256:f6dca47ef57efa2caec4f07d1cfa9028bdbd2b158bd7693f4ec6b47f39ac925d",
          "sha256": "f6dca47ef57efa2caec4f07d1cfa9028bdbd2b158bd7693f4ec6b47f39ac925d"
        },
        "x86_64_linux": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/tproxy/blobs/sha256:a5f184fbc30d9a748c4671d1d21876ccc7503d54bac57b19aa1f1bcd14239f71",
          "sha256": "a5f184fbc30d9a748c4671d1d21876ccc7503d54bac57b19aa1f1bcd14239f71"
        }
      }
    }
  },
  "keg_only": false,
  "keg_only_reason": null,
  "options": [],
  "build_dependencies": [
    "go"
  ],
  "dependencies": [],
  "test_dependencies": [],
  "recommended_dependencies": [],
  "optional_dependencies": [],
  "uses_from_macos": [],
  "uses_from_macos_bounds": [],
  "requirements": [],
  "conflicts_with": [],
  "conflicts_with_reasons": [],
  "link_overwrite": [],
  "caveats": null,
  "installed": [],
  "linked_keg": null,
  "pinned": false,
  "outdated": false,
  "deprecated": false,
  "deprecation_date": null,
  "deprecation_reason": null,
  "disabled": false,
  "disable_date": null,
  "disable_reason": null,
  "post_install_defined": false,
  "service": null,
  "tap_git_head": "4eeae4ea50839e967536ba646d5e0ed6fbcbad7f",
  "ruby_source_path": "Formula/tproxy.rb",
  "ruby_source_checksum": {
    "sha256": "8f1fae771abb881d66e1c1db2322554fc46869c9a92f2abd0b047f36282ecda0"
  },
  "date_added": "2022-12-15T01:45:29+00:00",
  "readme": "# tproxy\n\nEnglish | [简体中文](readme-cn.md)\n\n[![Go](https://github.com/kevwan/tproxy/workflows/Go/badge.svg?branch=main)](https://github.com/kevwan/tproxy/actions)\n[![Go Report Card](https://goreportcard.com/badge/github.com/kevwan/tproxy)](https://goreportcard.com/report/github.com/kevwan/tproxy)\n[![Release](https://img.shields.io/github/v/release/kevwan/tproxy.svg?style=flat-square)](https://github.com/kevwan/tproxy)\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n\n<a href=\"https://www.buymeacoffee.com/kevwan\" target=\"_blank\"><img src=\"https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png\" alt=\"Buy Me A Coffee\" style=\"height: 60px !important;width: 217px !important;\" ></a>\n\n## Why I wrote this tool\n\nWhen I develop backend services and write [go-zero](https://github.com/zeromicro/go-zero), I often need to monitor the network traffic. For example:\n1. monitoring gRPC connections, when to connect and when to reconnect\n2. monitoring MySQL connection pools, how many connections and figure out the lifetime policy\n3. monitoring any TCP connections on the fly\n\n## Installation\n\n```shell\n$ go install github.com/kevwan/tproxy@latest\n```\n\nOr use docker images:\n\n```shell\n$ docker run --rm -it -p <listen-port>:<listen-port> -p <remote-port>:<remote-port> kevinwan/tproxy:v1 tproxy -l 0.0.0.0 -p <listen-port> -r host.docker.internal:<remote-port>\n```\n\nFor arm64:\n\n```shell\n$ docker run --rm -it -p <listen-port>:<listen-port> -p <remote-port>:<remote-port> kevinwan/tproxy:v1-arm64 tproxy -l 0.0.0.0 -p <listen-port> -r host.docker.internal:<remote-port>\n```\n\nOn Windows, you can use [scoop](https://scoop.sh/):\n\n```shell\n$ scoop install tproxy\n```\n\n## Usages\n\n```shell\n$ tproxy --help\nUsage of tproxy:\n  -d duration\n    \tthe delay to relay packets\n  -l string\n    \tLocal address to listen on (default \"localhost\")\n  -p int\n    \tLocal port to listen on, default to pick a random port\n  -q\tQuiet mode, only prints connection open/close and stats, default false\n  -r string\n    \tRemote address (host:port) to connect\n  -s\tEnable statistics\n  -t string\n    \tThe type of protocol, currently support http2, grpc, redis and mongodb\n```\n\n## Examples\n\n### Monitor gRPC connections\n\n```shell\n$ tproxy -p 8088 -r localhost:8081 -t grpc -d 100ms\n```\n\n- listen on localhost and port 8088\n- redirect the traffic to `localhost:8081`\n- protocol type to be gRPC\n- delay 100ms for each packets\n\n<img width=\"579\" alt=\"image\" src=\"https://user-images.githubusercontent.com/1918356/181794530-5b25f75f-0c1a-4477-8021-56946903830a.png\">\n\n### Monitor MySQL connections\n\n```shell\n$ tproxy -p 3307 -r localhost:3306\n```\n\n<img width=\"600\" alt=\"image\" src=\"https://user-images.githubusercontent.com/1918356/173970130-944e4265-8ba6-4d2e-b091-1f6a5de81070.png\">\n\n### Check the connection reliability (Retrans rate and RTT)\n\n```shell\n$ tproxy -p 3307 -r remotehost:3306 -s -q\n```\n\n<img width=\"548\" alt=\"image\" src=\"https://user-images.githubusercontent.com/1918356/180252614-7cf4d1f9-9ba8-4aa4-a964-6f37cf991749.png\">\n\n### Learn the connection pool behaviors\n\n```shell\n$ tproxy -p 3307 -r localhost:3306 -q -s\n```\n\n<img width=\"404\" alt=\"image\" src=\"https://user-images.githubusercontent.com/1918356/236633144-9136e415-5763-4051-8c59-78ac363229ac.png\">\n\n## Give a Star! ⭐\n\nIf you like or are using this project, please give it a **star**. Thanks!"
}
