{
  "name": "ccm",
  "full_name": "ccm",
  "tap": "homebrew/core",
  "oldname": null,
  "oldnames": [],
  "aliases": [],
  "versioned_formulae": [],
  "desc": "Create and destroy an Apache Cassandra cluster on localhost",
  "license": "Apache-2.0",
  "homepage": "https://github.com/riptano/ccm",
  "versions": {
    "stable": "3.1.5",
    "head": "HEAD",
    "bottle": true
  },
  "urls": {
    "stable": {
      "url": "https://files.pythonhosted.org/packages/f1/12/091e82033d53b3802e1ead6b16045c5ecfb03374f8586a4ae4673a914c1a/ccm-3.1.5.tar.gz",
      "tag": null,
      "revision": null,
      "checksum": "f07cc0a37116d2ce1b96c0d467f792668aa25835c73beb61639fa50a1954326c"
    },
    "head": {
      "url": "https://github.com/riptano/ccm.git",
      "branch": "master"
    }
  },
  "revision": 3,
  "version_scheme": 0,
  "bottle": {
    "stable": {
      "rebuild": 2,
      "root_url": "https://ghcr.io/v2/homebrew/core",
      "files": {
        "arm64_ventura": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/ccm/blobs/sha256:caa73c15f42b4bbde8b8c8b4a8e63bc73caec21fba17f4691ed872a4ee9772a4",
          "sha256": "caa73c15f42b4bbde8b8c8b4a8e63bc73caec21fba17f4691ed872a4ee9772a4"
        },
        "arm64_monterey": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/ccm/blobs/sha256:d8f1195eed8bd7612ed15b923ae39ff629a43902e6b954e313d5bc8bb2bc3f56",
          "sha256": "d8f1195eed8bd7612ed15b923ae39ff629a43902e6b954e313d5bc8bb2bc3f56"
        },
        "arm64_big_sur": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/ccm/blobs/sha256:fbca70057fa9839396627d7780da959a3d017c435e9017e4a908b1a0832466aa",
          "sha256": "fbca70057fa9839396627d7780da959a3d017c435e9017e4a908b1a0832466aa"
        },
        "ventura": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/ccm/blobs/sha256:00666fc11e3498143856e368a3d0b3e78ac6e797402b601962a108254c069b8b",
          "sha256": "00666fc11e3498143856e368a3d0b3e78ac6e797402b601962a108254c069b8b"
        },
        "monterey": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/ccm/blobs/sha256:5965d7c0684c03296b7f466a00c1cd9c0c2a5d5639aa97ea6cd9fb571e334123",
          "sha256": "5965d7c0684c03296b7f466a00c1cd9c0c2a5d5639aa97ea6cd9fb571e334123"
        },
        "big_sur": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/ccm/blobs/sha256:a18b40aee5ee0a8870a62ccedf5c8b5c2c55dc41ac907df7ff0843fc6b47fd38",
          "sha256": "a18b40aee5ee0a8870a62ccedf5c8b5c2c55dc41ac907df7ff0843fc6b47fd38"
        },
        "catalina": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/ccm/blobs/sha256:d9f1096165bae0521103449c5c1586f945d628433d3884afaf14d23e56c25e0a",
          "sha256": "d9f1096165bae0521103449c5c1586f945d628433d3884afaf14d23e56c25e0a"
        },
        "x86_64_linux": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/ccm/blobs/sha256:b3e9f1a5872ef6102a0f2be3e44a4badd1fe2f6dbe2ddd49ce59650a80ff93c0",
          "sha256": "b3e9f1a5872ef6102a0f2be3e44a4badd1fe2f6dbe2ddd49ce59650a80ff93c0"
        }
      }
    }
  },
  "keg_only": false,
  "keg_only_reason": null,
  "options": [],
  "build_dependencies": [],
  "dependencies": [
    "python@3.11",
    "pyyaml",
    "six"
  ],
  "test_dependencies": [],
  "recommended_dependencies": [],
  "optional_dependencies": [],
  "uses_from_macos": [],
  "uses_from_macos_bounds": [],
  "requirements": [],
  "conflicts_with": [],
  "conflicts_with_reasons": [],
  "link_overwrite": [],
  "caveats": null,
  "installed": [],
  "linked_keg": null,
  "pinned": false,
  "outdated": false,
  "deprecated": false,
  "deprecation_date": null,
  "deprecation_reason": null,
  "disabled": false,
  "disable_date": null,
  "disable_reason": null,
  "post_install_defined": false,
  "service": null,
  "tap_git_head": "4eeae4ea50839e967536ba646d5e0ed6fbcbad7f",
  "ruby_source_path": "Formula/ccm.rb",
  "ruby_source_checksum": {
    "sha256": "f74a4d85acb40326a18d8f51e75d31cc91b900907fe220d2d77e069e5c50f227"
  },
  "date_added": "2014-08-21T08:32:30+01:00",
  "readme": "CCM (Cassandra Cluster Manager)\n====================================================\n\nWARNING - CCM configuration changes using updateconf does not happen according to CASSANDRA-17379\n-------------------------------------------------------------------------------------------------\n\nAfter CASSANDRA-15234, to support the Python upgrade tests CCM updateconf is replacing\nnew key name and value in case the old key name and value is provided.  \nFor example, if you add to config `permissions_validity_in_ms`, it will replace \n`permissions_validity` in default cassandra.yaml \nThis was needed to ensure correct overloading as CCM cassandra.yaml has keys \nsorted lexicographically. CASSANDRA-17379 was opened to improve the user experience \nand deprecate the overloading of parameters in cassandra.yaml. In CASSANDRA 4.1+, by default, \nwe refuse starting Cassandra with a config containing both old and new config keys for the\nsame parameter. Start Cassandra with `-Dcassandra.allow_new_old_config_keys=true` to override.\nFor historical reasons duplicate config keys in cassandra.yaml are allowed by default, start \nCassandra with `-Dcassandra.allow_duplicate_config_keys=false` to disallow this. Please note\nthat key_cache_save_period, row_cache_save_period, counter_cache_save_period will be affected \nonly by `-Dcassandra.allow_duplicate_config_keys`. Ticket CASSANDRA-17949 was opened to decide\nthe future of CCM updateconf post CASSANDRA-17379, until then - bear in mind that old replace \nnew parameters' in cassandra.yaml when using updateconf even if \n`-Dcassandra.allow_new_old_config_keys=false` is set by default. \n\nTLDR Do not exercise overloading of parameters in CCM if possible. Also, the mentioned changes\nare done only in master branch. Probably the best way to handle cassandra 4.1 in CCM at this \npoint is to set `-Dcassandra.allow_new_old_config_keys=false` and \n`-Dcassandra.allow_duplicate_config_keys=false` \nto prohibit any kind of overloading when using CCM master and CCM released versions\n\n\nCCM (Cassandra Cluster Manager)\n====================================================\n\nA script/library to create, launch and remove an Apache Cassandra cluster on\nlocalhost.\n\nThe goal of ccm and ccmlib is to make it easy to create, manage and destroy a\nsmall Cassandra cluster on a local box. It is meant for testing a Cassandra cluster.\n\nNew to Python development?\n--------------------------\nPython has moved on since CCM started development. `pip` is the new `easy_install`,\nPython 3 is the new 2.7, and pyenv and virtualenv are strongly recommended for managing\nmultiple Python versions and dependencies for specific Python applications.\n\nA typical MacOS setup would be to install [Homebrew](https://docs.brew.sh/Installation),\nthen `brew install pyenv` to manage Python versions and then use virtualenv to\nmanage the dependencies for CCM. Make sure to add [brew's bin directory to your path in\nyour ~/.zshenv](https://www.zerotohero.dev/zshell-startup-files/). This would be\n`/usr/local` for MacOS Intel and `/opt/homebrew/` for MacOS on Apple Silicon.\n\nNow you are ready to install Python using pyenv. To avoid getting a bleeding edge version that will fail with \nsome aspect of CCM you can `pyenv install 3.9.16`.\n\nTo create the virtualenv run `python3 -m venv --prompt ccm venv` with your git repo as the\ncurrent working directory to create a virtual environment for CCM. Then `source venv/bin/activate` to\nenable the venv for the current terminal and `deactivate` to exit.\n\nNow you a ready to set up the venv with CCM and its test dependencies. `pip install -e <path_to_ccm_repo>`\nto install CCM, and its runtime dependencies from `requirements.txt`, so that the version of\nCCM you are running points to the code you are actively working on. There is no build or package step because you\nare editing the Python files being run every time you invoke CCM.\n\nAlmost there. Now you just need to add the test dependencies that are not in `requirements.txt`.\n`pip install mock pytest` to finish setting up your dev environment!\n\nAnother caveat that has recently appeared Cassandra versions 4.0 and below ship with a version of JNA that isn't\ncompatible with Apple Silicon and there are no plans to update JNA on those versions. One work around if you are\ngenerally building Cassandra from source to use with CCM is to replace the JNA jar in your Maven repo with a [newer\none](https://search.maven.org/artifact/net.java.dev.jna/jna/5.8.0/jar) that supports Apple Silicon.\nWhich you version you need to replace will vary depending on the Cassandra version, but it will normally be in\n`~/.m2/repository/net/java/dev/jna/jna/<someversion>`. You can also replace the library in\n`~/.ccm/repository/<whatever>/lib`.\n\nAlso don't forget to disable `AirPlay Receiver` on MacOS which also listens on port 7000.\n\nRequirements\n------------\n\n- A working python installation (tested to work with python 2.7).\n- See `requirements.txt` for runtime requirements\n- `mock` and `pytest` for tests\n- ant (http://ant.apache.org/, on Mac OS X, `brew install ant`)\n- Java, Cassandra currently builds with either 8 or 11 and is restricted to JDK 8 language\n  features and dependencies. There are several sources for the JDK and Azul Zulu is one good option.\n- If you want to create multiple node clusters, the simplest way is to use\n  multiple loopback aliases. On modern linux distributions you probably don't\n  need to do anything, but on Mac OS X, you will need to create the aliases with\n\n      sudo ifconfig lo0 alias 127.0.0.2 up\n      sudo ifconfig lo0 alias 127.0.0.3 up\n      ...\n\n  Note that the usage section assumes that at least 127.0.0.1, 127.0.0.2 and\n  127.0.0.3 are available.\n\n### Optional Requirements\n\n- Paramiko (http://www.paramiko.org/): Paramiko adds the ability to execute CCM\n                                       remotely; `pip install paramiko`\n\n__Note__: The remote machine must be configured with an SSH server and a working\n          CCM. When working with multiple nodes each exposed IP address must be\n          in sequential order. For example, the last number in the 4th octet of\n          a IPv4 address must start with `1` (e.g. 192.168.33.11). See\n          [Vagrantfile](misc/Vagrantfile) for help with configuration of remote\n          CCM machine.\n\n\nKnown issues\n------------\nWindows only:\n  - `node start` pops up a window, stealing focus.\n  - cqlsh started from ccm show incorrect prompts on command-prompt\n  - non nodetool-based command-line options fail (sstablesplit, scrub, etc)\n  - To install psutil, you must use the .msi from pypi. pip install psutil will not work\n  - You will need ant.bat in your PATH in order to build C* from source\n  - You must run with an Unrestricted Powershell Execution-Policy if using Cassandra 2.1.0+\n  - Ant installed via [chocolatey](https://chocolatey.org/) will not be found by ccm, so you must create a symbolic\n    link in order to fix the issue (as administrator):\n    - cmd /c mklink C:\\ProgramData\\chocolatey\\bin\\ant.bat C:\\ProgramData\\chocolatey\\bin\\ant.exe\n\nMaxOS only:\n  - Airplay listens for incoming connections on 7000 so disable `Settings` -> `General` -> `AirDrop & Handoff` -> `AirPlay Receiver`\n\nRemote Execution only:\n  - Using `--config-dir` and `--install-dir` with `create` may not work as\n    expected; since the configuration directory and the installation directory\n    contain lots of files they will not be copied over to the remote machine\n    like most other options for cluster and node operations\n  - cqlsh started from ccm using remote execution will not start\n    properly (e.g.`ccm --ssh-host 192.168.33.11 node1 cqlsh`); however\n    `-x <CMDS>` or `--exec=CMDS` can still be used to execute a CQLSH command\n    on a remote node.\n\nInstallation\n------------\n\nccm uses python distutils so from the source directory run:\n\n    sudo ./setup.py install\n\nccm is available on the [Python Package Index][pip]:\n\n    pip install ccm\n\nThere is also a [Homebrew package][brew] available:\n\n    brew install ccm\n\n  [pip]: https://pypi.org/project/ccm/\n  [brew]: https://github.com/Homebrew/homebrew-core/blob/master/Formula/ccm.rb\n\nUsage\n-----\n\nLet's say you wanted to fire up a 3 node Cassandra cluster.\n\n### Short version\n\n    ccm create test -v 2.0.5 -n 3 -s\n\nYou will of course want to replace `2.0.5` by whichever version of Cassandra\nyou want to test.\n\n### Longer version\n\nccm works from a Cassandra source tree (not the jars). There are two ways to\ntell ccm how to find the sources:\n  1. If you have downloaded *and* compiled Cassandra sources, you can ask ccm\n     to use those by initiating a new cluster with:\n\n        ccm create test --install-dir=<path/to/cassandra-sources>\n\n     or, from that source tree directory, simply\n\n          ccm create test\n\n  2. You can ask ccm to use a released version of Cassandra. For instance to\n     use Cassandra 2.0.5, run\n\n          ccm create test -v 2.0.5\n\n     ccm will download the binary (from http://archive.apache.org/dist/cassandra),\n     and set the new cluster to use it. This means\n     that this command can take a few minutes the first time you\n     create a cluster for a given version. ccm saves the compiled\n     source in `~/.ccm/repository/`, so creating a cluster for that\n     version will be much faster the second time you run it\n     (note however that if you create a lot of clusters with\n     different versions, this will take up disk space).\n\nOnce the cluster is created, you can populate it with 3 nodes with:\n\n    ccm populate -n 3\n\nFor Mac OSX, create a new interface for every node besides the first, for example if you populated your cluster with 3 nodes, create interfaces for 127.0.0.2 and 127.0.0.3 like so:\n\n    sudo ifconfig lo0 alias 127.0.0.2\n    sudo ifconfig lo0 alias 127.0.0.3\n\nNote these aliases will disappear on reboot. For permanent network aliases on Mac OSX see ![Network Aliases](./NETWORK_ALIASES.md).\n\nAfter that execute:\n\n    ccm start\n\nThat will start 3 nodes on IP 127.0.0.[1, 2, 3] on port 9160 for thrift, port\n7000 for the internal cluster communication and ports 7100, 7200 and 7300 for JMX.\nYou can check that the cluster is correctly set up with\n\n    ccm node1 ring\n\nYou can then bootstrap a 4th node with\n\n    ccm add node4 -i 127.0.0.4 -j 7400 -b\n\n(populate is just a shortcut for adding multiple nodes initially)\n\nccm provides a number of conveniences, like flushing all of the nodes of\nthe cluster:\n\n    ccm flush\n\nor only one node:\n\n    ccm node2 flush\n\nYou can also easily look at the log file of a given node with:\n\n    ccm node1 showlog\n\nFinally, you can get rid of the whole cluster (which will stop the node and\nremove all the data) with\n\n    ccm remove\n\nThe list of other provided commands is available through\n\n    ccm\n\nEach command is then documented through the `-h` (or `--help`) flag. For\ninstance `ccm add -h` describes the options for `ccm add`.\n\n### Remote Usage (SSH/Paramiko)\n\nAll the usage examples above will work exactly the same for a remotely\nconfigured machine; however remote options are required in order to establish a\nconnection to the remote machine before executing the CCM commands:\n\n| Argument | Value | Description |\n| :--- | :--- | :--- |\n| --ssh-host | string | Hostname or IP address to use for SSH connection |\n| --ssh-port | int | Port to use for SSH connection<br/>Default is 22 |\n| --ssh-username | string | Username to use for username/password or public key authentication |\n| --ssh-password | string | Password to use for username/password or private key passphrase using public key authentication |\n| --ssh-private-key | filename | Private key to use for SSH connection |\n\n#### Special Handling\n\nSome commands require files to be located on the remote server. Those commands\nare pre-processed, file transfers are initiated, and updates are made to the\nargument value for the remote execution of the CCM command:\n\n| Parameter | Description |\n| :--- | :--- |\n| `--dse-credentials` | Copy local DSE credentials file to remote server |\n| `--node-ssl` | Recursively copy node SSL directory to remote server |\n| `--ssl` | Recursively copy SSL directory to remote server |\n\n#### Short Version\n\n    ccm --ssh-host=192.168.33.11 --ssh-username=vagrant --ssh-password=vagrant create test -v 2.0.5 -n 3 -i 192.168.33.1 -s\n\n__Note__: `-i` is used to add an IP prefix during the create process to ensure\n          that the nodes communicate using the proper IP address for their node\n\n### Source Distribution\n\nIf you'd like to use a source distribution instead of the default binary each time (for example, for Continuous Integration), you can prefix cassandra version with `source:`, for example:\n\n```\nccm create test -v source:2.0.5 -n 3 -s\n```\n\n### Automatic Version Fallback\n\nIf 'binary:' or 'source:' are not explicitly specified in your version string, then ccm will fallback to building the requested version from git if it cannot access the apache mirrors.\n\n### Git and GitHub\n\nTo use the latest version from the [canonical Apache Git repository](https://gitbox.apache.org/repos/asf?p=cassandra.git), use the version name `git:branch-name`, e.g.:\n\n```\nccm create trunk -v git:trunk -n 5\n```\n\nand to download a branch from a GitHub fork of Cassandra, you can prefix the repository and branch with `github:`, e.g.:\n\n```\nccm create patched -v github:jbellis/trunk -n 1\n```\n\n### Bash command-line completion\nccm has many sub-commands for both cluster commands as well as node commands, and sometimes you don't quite remember the name of the sub-command you want to invoke. Also, command lines may be long due to long cluster or node names.\n\nLeverage bash's *programmable completion* feature to make ccm use more pleasant. Copy `misc/ccm-completion.bash` to somewhere in your home directory (or /etc if you want to make it accessible to all users of your system) and source it in your `.bash_profile`:\n```\n. ~/scripts/ccm-completion.bash\n```\n\nOnce set up, `ccm sw<tab>` expands to `ccm switch `, for example. The `switch` sub-command has extra completion logic to help complete the cluster name. So `ccm switch cl<tab>` would expand to `ccm switch cluster-58` if cluster-58 is the only cluster whose name starts with \"cl\". If there is ambiguity, hitting `<tab>` a second time shows the choices that match:\n```\n$ ccm switch cl<tab>\n    ... becomes ...\n$ ccm switch cluster-\n    ... then hit tab twice ...\ncluster-56  cluster-85  cluster-96\n$ ccm switch cluster-8<tab>\n    ... becomes ...\n$ ccm switch cluster-85\n```\n\nIt dynamically determines available sub-commands based on the ccm being invoked. Thus, users running multiple ccm's (or a ccm that they are continuously updating with new commands) will automagically work.\n\nThe completion script relies on ccm having two hidden subcommands:\n* show-cluster-cmds - emits the names of cluster sub-commands.\n* show-node-cmds - emits the names of node sub-commands.\n\nThus, it will not work with sufficiently old versions of ccm.\n\nTesting\n-----------------------\n\nCreate a virtual environment i.e.:\n\n    python3 -m venv ccm\n\n`pip install` all dependencies as well as `mock` and `pytest`. Run `pytest` from the repository root to run the tests.\n\nRemote debugging\n-----------------------\n\nIf you would like to connect to your Cassandra nodes with a remote debugger you have to pass the `-d` (or `--debug`) flag to the populate command:\n\n    ccm populate -d -n 3\n\nThat will populate 3 nodes on IP 127.0.0.[1, 2, 3] setting up the remote debugging on ports 2100, 2200 and 2300.\nThe main thread will not be suspended so you don't have to connect with a remote debugger to start a node.\n\nAlternatively you can also specify a remote port with the `-r` (or `--remote-debug-port`) flag while adding a node\n\n    ccm add node4 -r 5005 -i 127.0.0.4 -j 7400 -b\n\nWhere things are stored\n-----------------------\n\nBy default, ccm stores all the node data and configuration files under `~/.ccm/cluster_name/`.\nThis can be overridden using the `--config-dir` option with each command.\n\nDataStax Enterprise\n-------------------\n\nCCM 2.0 supports creating and interacting with DSE clusters. The --dse\noption must be used with the `ccm create` command. See the `ccm create -h`\nhelp for assistance.\n\nCCM Lib\n-------\n\nThe ccm facilities are available programmatically through ccmlib. This could\nbe used to implement automated tests against Cassandra. A simple example of\nhow to use ccmlib follows:\n\n    import ccmlib.cluster\n\n    CLUSTER_PATH=\".\"\n    cluster = ccmlib.cluster.Cluster(CLUSTER_PATH, 'test', cassandra_version='2.1.14')\n    cluster.populate(3).start()\n    [node1, node2, node3] = cluster.nodelist()\n\n    # do some tests on the cluster/nodes. To connect to a node through thrift,\n    # the host and port to a node is available through\n    #   node.network_interfaces['thrift']\n\n    cluster.flush()\n    node2.compact()\n\n    # do some other tests\n\n    # after the test, you can leave the cluster running, you can stop all nodes\n    # using cluster.stop() but keep the data around (in CLUSTER_PATH/test), or\n    # you can remove everything with cluster.remove()\n\n--\nSylvain Lebresne <sylvain@datastax.com>"
}
