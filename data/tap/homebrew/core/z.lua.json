{
  "name": "z.lua",
  "full_name": "z.lua",
  "tap": "homebrew/core",
  "oldname": null,
  "oldnames": [],
  "aliases": [],
  "versioned_formulae": [],
  "desc": "New cd command that helps you navigate faster by learning your habits",
  "license": "MIT",
  "homepage": "https://github.com/skywind3000/z.lua",
  "versions": {
    "stable": "1.8.16",
    "head": "HEAD",
    "bottle": true
  },
  "urls": {
    "stable": {
      "url": "https://github.com/skywind3000/z.lua/archive/1.8.16.tar.gz",
      "tag": null,
      "revision": null,
      "checksum": "28e6c9d03792efc45d7ae822b23d59d2ea3e2d4f3a12f37bdee5a797a2903d59"
    },
    "head": {
      "url": "https://github.com/skywind3000/z.lua.git",
      "branch": "master"
    }
  },
  "revision": 0,
  "version_scheme": 0,
  "bottle": {
    "stable": {
      "rebuild": 0,
      "root_url": "https://ghcr.io/v2/homebrew/core",
      "files": {
        "all": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/z.lua/blobs/sha256:519898201455e344fb16a32b50e5cfafcb2a7b59011ac8167d90e51c3d31d18d",
          "sha256": "519898201455e344fb16a32b50e5cfafcb2a7b59011ac8167d90e51c3d31d18d"
        }
      }
    }
  },
  "keg_only": false,
  "keg_only_reason": null,
  "options": [],
  "build_dependencies": [],
  "dependencies": [
    "lua"
  ],
  "test_dependencies": [],
  "recommended_dependencies": [],
  "optional_dependencies": [],
  "uses_from_macos": [],
  "uses_from_macos_bounds": [],
  "requirements": [],
  "conflicts_with": [],
  "conflicts_with_reasons": [],
  "link_overwrite": [],
  "caveats": "Zsh users: add line below to your ~/.zshrc\n  eval \"$(lua $(brew --prefix z.lua)/share/z.lua/z.lua --init zsh)\"\n\nBash users: add line below to your ~/.bashrc\n  eval \"$(lua $(brew --prefix z.lua)/share/z.lua/z.lua --init bash)\"\n",
  "installed": [],
  "linked_keg": null,
  "pinned": false,
  "outdated": false,
  "deprecated": false,
  "deprecation_date": null,
  "deprecation_reason": null,
  "disabled": false,
  "disable_date": null,
  "disable_reason": null,
  "post_install_defined": false,
  "service": null,
  "tap_git_head": "aa66a84309b297ea296f7a4b9c424b5c0ec4875c",
  "ruby_source_path": "Formula/z.lua.rb",
  "ruby_source_checksum": {
    "sha256": "8221eac0919e50d28d3e7a8c68d4d7bfbdc9e2c799c76e0bfbeb785f398fded7"
  },
  "date_added": "2020-07-18T20:15:44+00:00",
  "readme": "# z.lua\r\n\r\nA command line tool which helps you navigate faster by learning your habits :zap:\r\n\r\nAn alternative to [z.sh](https://github.com/rupa/z) with windows and posix shells support and various improvements.\r\n\r\n【[README in Chinese | 中文文档](README.cn.md)】\r\n\r\n\r\n## Description\r\n\r\nz.lua is a faster way to navigate your filesystem. It tracks your most used directories, based on 'frecency'.  After  a  short  learning  phase, z will take you to the most 'frecent' directory that matches ALL of the regexes given on the command line, in order.\r\n\r\nFor example, `z foo bar` would match `/foo/bar` but not `/bar/foo`.\r\n\r\n## Reputation\r\n\r\nFrom people using z.lua:\r\n\r\n- I like this in principal. I’m pretty damn predictable at the command line and far too lazy to make shortcuts\r\n- It feels far more intuitive and it's so incredibly convenient to be able to jump between folders I'm working in without having to traverse an entire tree. The shell used to feel so constraining for me, but tools like this are making me enjoy it so much more. \r\n- I can finally have autojump-like functionality on my Raspberry Pi 1 without waiting 30 seconds every time I open a new shell. Thanks z.lua devs.\r\n- Anyway, z.lua is a promising project. If you only need directory jumping, it may be the best choice.\r\n\r\n\r\n## Features\r\n\r\n- **10x** times faster than **fasd** and **autojump**, **3x** times faster than **z.sh**.\r\n- Gain the ultimate speed with an optional [native module](https://github.com/skywind3000/czmod) written in C.\r\n- Available for **posix shells**: bash, zsh, dash, sh, ash, ksh, busybox and etc.\r\n- Available for Fish Shell, Power Shell and Windows cmd.\r\n- [Enhanced matching algorithm](#enhanced-matching) takes you to where ever you want precisely.\r\n- Allow updating database only if `$PWD` changed with \"$_ZL_ADD_ONCE\" set to 1.\r\n- Interactive selection enables you to choose where to go before cd.\r\n- Integrated with FZF (optional) for interactive selection and completion.\r\n- Quickly go back to a parent directory instead of typing \"cd ../../..\".\r\n- Corresponding experience in different shells and operating systems. \r\n- Compatible with Lua (5.1, 5.2, 5.3+) and luajit.\r\n- Self contained, distributed as a single `z.lua` script, no other dependence.\r\n\r\n\r\n## Examples\r\n\r\n```bash\r\nz foo        # cd to most frecent dir matching foo\r\nz foo bar    # cd to most frecent dir matching foo and bar\r\nz -r foo     # cd to the highest ranked dir matching foo\r\nz -t foo     # cd to most recently accessed dir matching foo\r\nz -l foo     # list matches instead of cd\r\nz -c foo     # restrict matches to subdirs of $PWD\r\nz -e foo     # echo the best match, don't cd\r\nz -i foo     # cd with interactive selection\r\nz -I foo     # cd with interactive selection using fzf\r\nz -b foo     # cd to the parent directory starting with foo\r\nz -b foo bar # replace foo with bar in cwd and cd there\r\n```\r\n\r\n\r\n## Install\r\n\r\n- Bash:\r\n\r\n  put something like this in your `.bashrc`:\r\n\r\n      eval \"$(lua /path/to/z.lua --init bash)\"\r\n\r\n  the default matching algorithm is similar to z.sh to keep compatible, you may like the enhanced matching algorithm for productivity:\r\n\r\n      eval \"$(lua /path/to/z.lua --init bash enhanced once)\"\r\n\r\n  and perhaps this:\r\n\r\n      eval \"$(lua /path/to/z.lua --init bash enhanced once echo)\"\r\n\r\n  if you want `z.lua` print the new directory after cd. \r\n\r\n  For `fzf` tab completion use:\r\n\r\n      eval \"$(lua /path/to/z.lua --init bash enhanced once fzf)\"\r\n  \r\n  **NOTE**: For wsl-1 users, `lua-filesystem` must be installed:\r\n\r\n      sudo apt-get install lua-filesystem\r\n\r\n  To avoid a wsl-1 [defect](https://github.com/microsoft/WSL/issues/5505).\r\n\r\n- Zsh:\r\n\r\n  put something like this in your `.zshrc`:\r\n\r\n      eval \"$(lua /path/to/z.lua --init zsh)\"\r\n\r\n  Options like \"enhanced\", \"once\" and \"fzf\" can be used after `--init` too. It can also be initialized from \"skywind3000/z.lua\" with your zsh plugin managers (antigen / oh-my-zsh).\r\n\r\n  **NOTE**: for wsl-1 users, `lua-filesystem` must be installed.\r\n\r\n- Posix Shells:\r\n\r\n  put something like this in your `.profile`:\r\n\r\n      eval \"$(lua /path/to/z.lua --init posix)\"\r\n\r\n  For old shells like ksh (Korn Shell), some features are missing, you can try:\r\n\r\n      eval \"$(lua /path/to/z.lua --init posix legacy)\"\r\n\r\n  To generate old posix compatible script.\r\n\r\n- Fish Shell (version `2.4.0` or above):\r\n\r\n  Create `~/.config/fish/conf.d/z.fish` with following code\r\n\r\n      lua /path/to/z.lua --init fish | source\r\n\r\n  If you'd like `z.lua` to cooperate with fish's own [directory history](https://fishshell.com/docs/3.2/index.html#id34), you can put\r\n\r\n      set -gx _ZL_CD cd\r\n\r\n  into the same file.\r\n\r\n- Power Shell:\r\n\r\n  > ⚠️ **WARNING**: users of [Starship Prompt](https://starship.rs/) should add the following command *after* `starship init`.\r\n  \r\n  put something like this in your `profile.ps1`:\r\n\r\n      Invoke-Expression (& { (lua /path/to/z.lua --init powershell) -join \"`n\" })\r\n\r\n- Windows cmd (with clink):\r\n\r\n  - Copy z.lua and z.cmd to clink's home directory\r\n  - Add clink's home to `%PATH%` (z.cmd can be called anywhere)\r\n  - Ensure that \"lua\" can be called in `%PATH%`\r\n\r\n- Windows cmder:\r\n\r\n  - Copy z.lua and z.cmd to cmder/vendor\r\n  - Add cmder/vendor to `%PATH%`\r\n  - Ensure that \"lua\" can be called in `%PATH%`\r\n\r\n- Windows WSL-1:\r\n\r\n  Install `lua-filesystem` module before init z.lua:\r\n        \r\n        sudo apt-get install lua-filesystem\r\n\r\n  This module is required due to a wsl-1 [defect](https://github.com/microsoft/WSL/issues/5505).\r\n\r\n\r\n\r\n## Options\r\n\r\n- set `$_ZL_CMD` in .bashrc/.zshrc to change the command (default z).\r\n- set `$_ZL_DATA` in .bashrc/.zshrc to change the datafile (default ~/.zlua).\r\n- set `$_ZL_NO_PROMPT_COMMAND` if you're handling PROMPT_COMMAND yourself.\r\n- set `$_ZL_EXCLUDE_DIRS` to a comma separated list of dirs to exclude.\r\n- set `$_ZL_ADD_ONCE` to '1' to update database only if `$PWD` changed.\r\n- set `$_ZL_MAXAGE` to define a aging threshold (default is 5000).\r\n- set `$_ZL_CD` to specify your own cd command (default is `builtin cd` in Unix shells).\r\n- set `$_ZL_ECHO` to 1 to display new directory name after cd.\r\n- set `$_ZL_MATCH_MODE` to 1 to enable enhanced matching.\r\n- set `$_ZL_NO_CHECK` to 1 to disable path validation, use `z --purge` to clean\r\n- set `$_ZL_HYPHEN` to 1 to treat hyphon (-) as a normal character not a lua regexp keyword.\r\n- set `$_ZL_CLINK_PROMPT_PRIORITY` change clink prompt register priority (default 99).\r\n\r\n## Aging\r\n\r\nThe rank of directories maintained by z.lua undergoes aging based on a simple formula. The rank of each entry is incremented  every  time  it  is accessed.  When the sum of ranks is over 5000 (`$_ZL_MAXAGE`), all ranks are multiplied by 0.9. Entries with a rank lower than 1 are forgotten.\r\n\r\n\r\n## Frecency\r\n\r\nFrecency is a portmanteau of 'recent' and 'frequency'. It is a weighted rank that depends on how often and how recently something occurred. As far as I know, Mozilla came up with the term.\r\n\r\nTo z.lua, a directory that has low ranking but has been accessed recently will quickly  have higher rank than a directory accessed frequently a long time ago. Frecency is determined at runtime.\r\n\r\n\r\n## Default Matching\r\n\r\nBy default, `z.lua` uses default matching algorithm similar to the original `z.sh`. Paths must be match all of the regexes in order.\r\n\r\n- cd to a directory contains foo:\r\n\r\n      z foo\r\n\r\n- use multiple arguments:\r\n\r\n  Assuming the following database:\r\n\r\n      10   /home/user/work/inbox\r\n      30   /home/user/mail/inbox\r\n\r\n  `\"z in\"` would cd into `/home/user/mail/inbox` as the higher weighted entry. However you can pass multiple arguments to z.lua to prefer a different entry. In the above example, `\"z w in\"` would then change directory to `/home/user/work/inbox`.\r\n\r\n- use regexes:\r\n\r\n  ```bash\r\n  z foo$   # cd to a directory ends with foo\r\n  z %d     # cd to a directory that contains a digit\r\n  ```\r\n\r\n  Unlike `z.sh`, `z.lua` uses the [Lua regular expression syntax](https://www.lua.org/pil/20.2.html).\r\n\r\n## Enhanced Matching\r\n\r\nEnhanced matching can be enabled by exporting the environment:\r\n\r\n```bash\r\nexport _ZL_MATCH_MODE=1\r\n```\r\n\r\nOr, append a `enhanced` after `--init xxx`:\r\n\r\n```bash\r\neval \"$(lua /path/to/z.lua --init bash enhanced)\"\r\n```\r\n\r\nFor a given set of queries (the set of command-line arguments passed to z.lua), a path is a match if and only if:\r\n\r\n1. Queries match the path in order (same as default method).\r\n2. The last query matches the last segment of the path.\r\n\r\nIf no match is found, it will fall back to default matching method.\r\n\r\n- match the last segment of the path:\r\n\r\n  Assuming the following database:\r\n\r\n      10   /home/user/workspace\r\n      20   /home/user/workspace/project1\r\n      30   /home/user/workspace/project2\r\n      40   /home/user/workspace/project3\r\n\r\n  If you use `\"z wo\"` in enhanced matching mode, only the `/home/user/workspace` will be matched, because according to rule No.2 it is the only path whose last segment matches `\"wo\"`.\r\n\r\n  Since the last segment of a path is always easier to be recalled, it is sane to give it higher priority. You can also achieve this by typing `\"z space$\"` in both methods, but `\"z wo\"` is easier to type.\r\n\r\n  Tips for rule No.2: \r\n\r\n  - If you want your last query **not only** to match the last segment of the path, append '$' as the last query. eg. `\"z wo $\"`. \r\n  - If you want your last query **not** to match the last segment of the path, append '/' as the last query. eg. `\"z wo /\"`.\r\n \r\n\r\n- cd to the existent path if there is no match:\r\n\r\n  Sometimes if you use:\r\n\r\n      z foo\r\n\r\n  And there is no matching result in the database, but there is an existent directory which can be accessed with the name \"foo\" from current directory, \"`z foo`\" will just work as:\r\n\r\n      cd foo\r\n\r\n  So, in the enhanced matching method, you can always use `z` like `cd` to change directory even if the new directory is untracked (hasn't been accessed).\r\n\r\n- Skip the current directory:\r\n\r\n  When you are calling `z xxx` but the best match is the current directory, z.lua will choose the 2nd best match result for you. Assuming the database:\r\n\r\n      10   /Users/Great_Wall/.rbenv/versions/2.4.1/lib/ruby/gems\r\n      20   /Library/Ruby/Gems/2.0.0/gems\r\n\r\n  When I use `z gems` by default, it will take me to `/Library/Ruby/Gems/2.0.0/gems`, but it's not what I want, so I press up arrow and execute `z gems` again, it will take me to `/Users/Great_Wall/.rbenv/versions/2.4.1/lib/ruby/gems` and this what I want.\r\n\r\n  Of course, I can always use `z env gems` to indicate what I want precisely. Skip the current directory means when you use `z xxx` you always want to change directory instead of stay in the same directory and do nothing if current directory is the best match.\r\n\r\nThe default matching method is designed to be compatible with original z.sh, but the enhanced matching method is much more handy and exclusive to z.lua.\r\n\r\n\r\n## Add Once\r\n\r\nBy default, z.lua will add current directory to database each time before display command prompt (correspond with z.sh). But there is an option to allow z.lua add path only if current working directory changed.\r\n\r\nTo enable this, you can set `$_ZL_ADD_ONCE` to `1` before init z.lua. Or you can initialize z.lua on linux like this:\r\n\r\n````bash\r\neval \"$(lua /path/to/z.lua --init bash once)\"\r\neval \"$(lua /path/to/z.lua --init zsh once)\"\r\nlua /path/to/z.lua --init fish once | source\r\n````\r\n\r\nWith `add once` mode off (default), z.lua will consider the time you spent in the directory (like z.sh). When this mode is on, consider the times you accessed the directory (like autojump), and that could be much faster on slow hardware. \r\n\r\n\r\n## Interactive Selection\r\n\r\nWhen there are multiple matches found, using `z -i` will display a list:\r\n\r\n```bash\r\n$ z -i soft\r\n3:  0.25        /home/data/software\r\n2:  3.75        /home/skywind/tmp/comma/software\r\n1:  21          /home/skywind/software\r\n> {CURSOR}\r\n```\r\n\r\nAnd then you can input the number and choose where to go before actual cd. eg. input 3 to cd to `/home/data/software`. And if you just press ENTER and input nothing, it will just quit and stay where you were.\r\n\r\nNOTE: for fish shell, this feature requires fish 2.7.0 or above.\r\n\r\n\r\n## FZF Supports\r\n\r\nFrom version 1.1.0, a new option `\"-I\"` will allow you to use fzf to select when there are multiple matches. \r\n\r\n![](images/fzf.png)\r\n\r\nWhen we use `\"z -I vim\"`，12 paths contains keyword \"vim\" has been matched and ordered by their frecent value, the higher frecent comes with the higher rank. Then without cd to the highest ranked path, z.lua passes all the candidates to fzf. \r\n\r\nNow you can input some space separated keywords (no order required) or use `CTRL+J`/`CTRL+K` (same as `UP`/`DOWN`) to select where you want to go, or `ESC` / `CTRL`+`D`/`G` to give up. \r\n\r\nOf course, you can always give more keywords to `z` command to match your destination precisely. `\"z -I\"` is similar to `\"z -i\"`, but use fzf. Both `\"-i\"` and `\"-I\"` provide you another way for path navigation.\r\n\r\nUsually, `z -I` can be aliased to `zf` (z + fuzzy finder) for convenience. If there are only one path matched, `z -I` will jump to it directly, fzf will only be invoked for multiple matches. `\"z -I .\"` or `\"zf .\"` can be used to use fzf select from entire database. \r\n\r\nFor more information about this, please visit [wiki - effective with fzf](https://github.com/skywind3000/z.lua/wiki/Effective-with-fzf).\r\n\r\nNOTE: For fish shell, this feature requires fish 2.7.0 or above. You can specify fzf executable in `$_ZL_FZF` environment variable, `\"fzf\"` will be called by default.\r\n\r\n\r\n## Jump Backwards\r\n\r\nNew option `\"-b\"` can quickly go back to a specific parent directory in bash instead of typing \"cd ../../..\" redundantly.\r\n\r\n- **(No argument)**: `cd` into the project root, the project root the nearest parent directory with `.git`/`.hg`/`.svn` in it.\r\n- **(One argument)**: `cd` into the closest parent starting with keyword, if not find, go to the parent containing keyword.\r\n- **(Two arguments)**: replace the first value with the second one (in the current path).\r\n  If simple substitution does not work, falls back to fuzzily replacing path components.\r\n\r\nLet's start by aliasing `z -b` to `zb`:\r\n\r\n```bash\r\n# go all the way up to the project root (in this case, the one that has .git in it)\r\n~/github/lorem/src/public$ zb\r\n  => cd ~/github/lorem\r\n\r\n# cd into to the first parent directory named g*\r\n~/github/vimium/src/public$ zb g\r\n  => cd ~/github\r\n\r\n# goto the site directory quickly\r\n~/github/demo/src/org/main/site/utils/file/reader/whatever$ zb si\r\n  => cd ~/github/demo/src/org/main/site\r\n\r\n# substitute jekyll with ghost\r\n~/github/jekyll/test$ zb jekyll ghost\r\n  => cd ~/github/ghost/test\r\n\r\n# same as above, but fuzzy\r\n~/github/jekyll/test$ zb jek gh\r\n  => z ~/github/ gh /test\r\n    => cd ~/github/ghost/test  # Assuming that's the most frecent match\r\n```\r\n\r\nBackward jumping can also be used with `$_ZL_ECHO` option (echo $PWD after cd), which makes it possible to combine them with other tools without actually changing the working directory (eg. ``ls `zb git` ``). \r\n\r\nEnvironment variable `$_ZL_ROOT_MARKERS` is a comma separated list for project root locating, and can be redefined as:\r\n\r\n```bash\r\nexport _ZL_ROOT_MARKERS=\".git,.svn,.hg,.root,package.json\"\r\n```\r\n\r\nIf you want `zb` jump back to a parent directory contains a `.root` or `package.json` in it.\r\n\r\n**Bonus**: `zb ..` equals to `cd ..`, `zb ...` equals to `cd ../..` and `zb ....` equals to `cd ../../..`, and so on. Finally, `zb ..20` equals to `cd (..)x20`.\r\n\r\n**Bonus**: try `z -b -i` and `z -b -I` and you can alias them to `zbi` and `zbf`.\r\n\r\n## Completion\r\n\r\nFor zsh/fish, completion can be triggered by `z foo<tab>`. and a list of candidates will display in zsh / fish:\r\n\r\n![](images/complete-1.png)\r\n\r\nPress `<tab>` again, you can select your destination in a visualized way.\r\n\r\nBash is not as powerful as zsh/fish, so we introduced fzf-completion for bash, initialize your z.lua and append `fzf` keyword after `--init`:\r\n\r\n```bash\r\neval \"$(lua /path/to/z.lua --init bash enhanced once echo fzf)\"\r\n```\r\n\r\nIf you want use fzf completion in zsh, initalize your z.lua and append `fzf` keyword after `--init`:\r\n\r\n```zsh\r\neval \"$(lua /path/to/z.lua --init zsh enhanced once echo fzf)\"\r\n```\r\n\r\nThen press `<tab>` after `z xxx`:\r\n\r\n![](images/complete-2.png)\r\n\r\nWith the help of fzf, completion in bash is much easier now. \r\n\r\n`z.lua` can cooperate with [fz](https://github.com/changyuheng/fz) for **better completion** result in both bash and zsh, for more information see [FAQ](https://github.com/skywind3000/z.lua/wiki/FAQ#fzsh-for-better-completion).\r\n\r\nNOTE: To enable this, command `fzf` must be found in `$PATH` before initialization.\r\n\r\n\r\n## Most Recently Accessed Path\r\n\r\n`z.lua` provides a fast way to visit MRU directories without typing any keyword. That is `dirstack`, which records recently visited paths and can be manipulated by `z -`, `z --` and `z -{num}`:\r\n\r\n```bash\r\n# display current dir stack\r\n$ z --    \r\n 0  /home/skywind/work/match/memory-match\r\n 1  /home/skywind/.local/etc\r\n 2  /home/skywind/software/vifm-0.9.1\r\n 3  /home/skywind/work\r\n 4  /home/skywind/work/match\r\n\r\n# cd to the 2nd directory in the stack\r\n$ z -2\r\n  => cd /home/skywind/software/vifm-0.9.1\r\n\r\n# popup stacktop (cd to previous directory), same as \"z -0\"\r\n$ z -\r\n  => cd -\r\n```\r\n\r\nThe `dirstack` is calculated from z.lua's database, and has no dependency on shells or systems. You will not lost records after re-login, and history can be shared across shells and sessions.\r\n\r\nThere is another way to access MRU directories interactively by utilizing parameter `-I` (fzf) and `-t` (sort by time):\r\n\r\n```bash\r\nalias zh='z -I -t .'\r\n```\r\n\r\nThe new alias `zh` (jump to history) is very easy to input:\r\n\r\n![](images/mru.png)\r\n\r\nThe first column indicates how many seconds ago you have visited, and the second column is the path name. With `zh`, you can type some character to use string matching in fzf, or use `<Up>`/`<Down>` (as well as `CTRL+j/k`) to move the selector (red `>`) up and down. \r\n\r\nAt last, press `<enter>` to accept or `<ESC>` to give up. \r\n\r\nRemember to enable the [enhanced matching](#enhanced-matching) algorithm, the current working directory can be skipped with it.\r\n\r\n\r\n## Ranger integration\r\nTo add a `:z` command to the [`ranger` file manager], copy the `ranger_zlua.py` file to `~/.config/ranger/plugins/`.\r\nYou can then use `:z foo`, `:z -b foo`, etc. from ranger. Use `:z -h` for help.\r\n\r\n[`ranger` file manager]: https://github.com/ranger/ranger\r\n\r\nTo define additional commands (`:zb` for example) in ranger, you can put `alias zb z -b` into `~/.config/ranger/rc.conf`.\r\n\r\n\r\n## Tips\r\n\r\nRecommended aliases you may find useful:\r\n\r\n```bash\r\nalias zz='z -c'      # restrict matches to subdirs of $PWD\r\nalias zi='z -i'      # cd with interactive selection\r\nalias zf='z -I'      # use fzf to select in multiple matches\r\nalias zb='z -b'      # quickly cd to the parent directory\r\n```\r\n\r\nImport data from z.sh：\r\n\r\n\r\n```bash\r\ncat ~/.z >> ~/.zlua\r\n```\r\n\r\nImport data from autojump：\r\n\r\n```bash\r\nFN=\"$HOME/.local/share/autojump/autojump.txt\"\r\nawk -F '\\t' '{print $2 \"|\" $1 \"|\" 0}' $FN >> ~/.zlua\r\n```\r\n\r\nDon't forget to read the [Frequently Asked Questions](https://github.com/skywind3000/z.lua/wiki/FAQ).\r\n\r\n\r\n## Benchmark\r\n\r\nThe slowest part is adding path to history data file. It will run every time when you press enter (installed in $PROMPT_COMMAND). So I profile it on my NAS:\r\n\r\n```bash\r\n$ time autojump --add /tmp\r\nreal    0m0.352s\r\nuser    0m0.077s\r\nsys     0m0.185s\r\n\r\n$ time fasd -A /tmp\r\nreal    0m0.618s\r\nuser    0m0.076s\r\nsys     0m0.242s\r\n\r\n$ time _z --add /tmp\r\nreal    0m0.194s\r\nuser    0m0.046s\r\nsys     0m0.154s\r\n\r\n$ time _zlua --add /tmp\r\nreal    0m0.052s\r\nuser    0m0.015s\r\nsys     0m0.030s\r\n```\r\n\r\nAs you see, z.lua is the fastest one and requires less resource.\r\n\r\n## Native Module\r\n\r\nz.lua is fast enough for most case, the path tracking action will be triggered each time when you change your current directory.\r\n\r\nSo I still recommend the pure lua script for portability and flexibility, but for someone who really care about `10ms` or `1ms` things, this module can help them to gain the ultimate speed.\r\n\r\n- [czmod](https://github.com/skywind3000/czmod): native module to boost `z.lua`.\r\n\r\nAverage performance:\r\n\r\n| Name | czmod |  z.lua |\r\n|-|-|-|\r\n| **Update Time** | 1.6ms | 13.2ms |\r\n| **Query Time** | 1.5ms | 9.8ms |\r\n\r\n\r\n\r\n## History\r\n\r\n- 1.8.7 (2020-06-29): use lfs or luajit's cffi if possible.\r\n- 1.8.4 (2020-02-10): fish shell: set `$_ZL_ECHO` to global scope.\r\n- 1.8.3 (2020-02-09): new: `z -b -i` and `z -b -I` to jump backwards in interactive mode.\r\n- 1.7.4 (2019-12-29): new: `$_ZL_HYPHEN` to treat hyphen as a normal character, see [here](https://github.com/skywind3000/z.lua/wiki/FAQ#how-to-input-a-hyphen---in-the-keyword-).\r\n- 1.7.3 (2019-09-07): use [lua-filesystem](http://keplerproject.github.io/luafilesystem/) package if possible when `$_ZL_USE_LFS` is `1`.\r\n- 1.7.2 (2019-08-01): Improve bash/zsh shell compatibility by [@barlik](https://github.com/barlik).\r\n- 1.7.1 (2019-06-07): Fixed: `$_ZL_DATA` failure on Linux sometimes.\r\n- 1.7.0 (2019-03-09): Support [ranger](https://github.com/skywind3000/z.lua/wiki/FAQ#how-to-integrate-zlua-to-ranger-), fix ReplaceFile issue in luajit (windows).\r\n- 1.6.0 (2019-03-04): optimize with ffi module (luajit builtin module).\r\n- 1.5.11 (2019-03-02): fixed: os.path.isdir doesn't work for symbol link folders.\r\n- 1.5.10 (2019-03-01): Prevent writing file racing.\r\n- 1.5.9 (2019-02-25): `z -b` should not match current directory (close #56).\r\n- 1.5.8 (2019-02-21): new `$_ZL_FZF_HEIGHT` to control `--height` parameter in fzf.\r\n- 1.5.7 (2019-02-21): rename `$_ZL_FZF_SORT` to `$_ZL_INT_SORT` it will affect both `-i` and `-I`.\r\n- 1.5.6 (2019-02-20): set `$_ZL_FZF_SORT` to 1 to sort directories by alphabet in fzf.\r\n- 1.5.5 (2019-02-20): `$_ZL_FZF_FLAG` can be used to override fzf flags, default to \"+s -e\".\r\n- 1.5.4 (2019-02-19): fixed: file/path existence detection fails on read-only fs (closed [#49](https://github.com/skywind3000/z.lua/issues/49) by [@contrun](https://github.com/contrun)).\r\n- 1.5.3 (2019-02-17): new `$_ZL_FZF_FLAG` for passing additional flags to fzf, add `-e` argument to fzf.\r\n- 1.5.2 (2019-02-16): be aware of all arguments in fzf completion.\r\n- 1.5.1 (2019-02-15): new: simulated dir stack by `z -`, `z --` and `z -{num}`.\r\n- 1.5.0 (2019-02-14): fixed minor issues in backward jumping.\r\n- 1.4.7 (2019-02-13): Don't use regex in backward jumping (use plain text instead).\r\n- 1.4.6 (2019-02-12): change: `_ZL_EXCLUDE_DIRS` to a comma separated list of dirs to exclude.\r\n- 1.4.5 (2019-02-10): improve bash fzf completion and posix compatibility.\r\n- 1.4.4 (2019-02-10): supports legacy posix shells like ksh, init with `z.lua --init posix legacy`.\r\n- 1.4.3 (2019-02-08): fixed minor issues.\r\n- 1.4.2 (2019-02-06): you can disabled path validation by `$_ZL_NO_CHECK`, and use `z --purge` to clear bad paths manually.\r\n- 1.4.1 (2019-02-06): fzf tab-completion in bash ([@BarbUk](https://github.com/BarbUk)), fixed hang in fish shell (close [#29](https://github.com/skywind3000/z.lua/issues/29)).\r\n- 1.4.0 (2019-02-04): Ported to Power Shell ([@manhong2112](https://github.com/manhong2112))\r\n- 1.3.0 (2019-02-04): Backward jumping, prevent \"cd ../../..\" repeatly.\r\n- 1.2.0 (2019-02-03): Upgrade string lib and path lib.\r\n- 1.1.0 (2019-02-02): New option '-I' to use fzf to select from multiple matches.\r\n- 1.0.0 (2019-02-01): Fixed minor issues and make it stable.\r\n- 0.5.0 (2019-01-21): Ported to Fish Shell ([@TeddyDD](https://github.com/TeddyDD)).\r\n- 0.4.1 (2019-01-20): Don't return failed exit code when $_ZL_ECHO is unbind (Mario Rodas).\r\n- 0.4.0 (2019-01-17): new enhanced matching algorithm，can be enabled by appending `enhanced` keyword after `--init`.\r\n- 0.3.0 (2018-12-26): new option `-i` to enable interactive selection.\r\n- 0.2.0 (2018-11-25): new option `$_ZL_ADD_ONCE` to enable updating datafile only if `$PWD` changed.\r\n- 0.1.0 (2018-04-30): supports windows cmd, cmder and conemu.\r\n- 0.0.0 (2018-03-21): initial commit, compatible with original z.sh.\r\n\r\n## Help\r\n\r\nThis project needs help for the tasks below:\r\n\r\n- [ ] Support csh/tcsh.\r\n- [ ] Completion: Actually I got little knowledge in completion, and need help to improve it.\r\n- [ ] Completion: Implement completion for Power Shell.\r\n- [ ] Completion: Implement completion for different arguments.\r\n- [ ] Packaging: make it possible to be installed easily in different systems or popular plugin managers.\r\n\r\n\r\n## Thanks\r\n\r\n- Thanks to [@rupa](https://github.com/rupa) for inspiring me to start this project.\r\n- Thanks to [@vigneshwaranr](https://github.com/vigneshwaranr) and [@shyiko](https://github.com/shyiko) for inspiring me the backward jumping.\r\n- Thanks to [@TeddyDD](https://github.com/TeddyDD) for Fish Shell porting.\r\n- Thanks to [@manhong2112](https://github.com/manhong2112) for Power Shell porting.\r\n- Thanks to [@BarbUk](https://github.com/BarbUk) for fzf completion in Bash.\r\n- Thanks to [@barlik](https://github.com/barlik) for many improvements.\r\n\r\nAnd many others.\r\n\r\n\r\n\r\n## License\r\n\r\nLicensed under MIT license.\r\n\r"
}
