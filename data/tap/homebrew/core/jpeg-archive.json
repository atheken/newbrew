{
  "name": "jpeg-archive",
  "full_name": "jpeg-archive",
  "tap": "homebrew/core",
  "oldname": null,
  "oldnames": [],
  "aliases": [],
  "versioned_formulae": [],
  "desc": "Utilities for archiving JPEGs for long term storage",
  "license": "MIT",
  "homepage": "https://github.com/danielgtaylor/jpeg-archive",
  "versions": {
    "stable": "2.2.0",
    "head": null,
    "bottle": true
  },
  "urls": {
    "stable": {
      "url": "https://github.com/danielgtaylor/jpeg-archive/archive/v2.2.0.tar.gz",
      "tag": null,
      "revision": null,
      "checksum": "3da16a5abbddd925dee0379aa51d9fe0cba33da0b5703be27c13a2dda3d7ed75"
    }
  },
  "revision": 1,
  "version_scheme": 0,
  "bottle": {
    "stable": {
      "rebuild": 0,
      "root_url": "https://ghcr.io/v2/homebrew/core",
      "files": {
        "arm64_ventura": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/jpeg-archive/blobs/sha256:fab1849787fa6dc209963175b418748a9b92bdb64f0a39a4329afac2d8b262f0",
          "sha256": "fab1849787fa6dc209963175b418748a9b92bdb64f0a39a4329afac2d8b262f0"
        },
        "arm64_monterey": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/jpeg-archive/blobs/sha256:cbaf592384b0d9906eb44217daa1971ec19d571cbc4cd25c2a14caa2451428e8",
          "sha256": "cbaf592384b0d9906eb44217daa1971ec19d571cbc4cd25c2a14caa2451428e8"
        },
        "arm64_big_sur": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/jpeg-archive/blobs/sha256:6608df468a7af8298e39f54afc7b391cd9660bdd88783850577d86862b6ccb51",
          "sha256": "6608df468a7af8298e39f54afc7b391cd9660bdd88783850577d86862b6ccb51"
        },
        "ventura": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/jpeg-archive/blobs/sha256:0009726c390613fd0ed7f47a95383df4454efd2291da691129539f6ab32422f6",
          "sha256": "0009726c390613fd0ed7f47a95383df4454efd2291da691129539f6ab32422f6"
        },
        "monterey": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/jpeg-archive/blobs/sha256:3461975fc932a94798f2d7c6cad3f030081a29a24a31bc391e2344c6aa6ed177",
          "sha256": "3461975fc932a94798f2d7c6cad3f030081a29a24a31bc391e2344c6aa6ed177"
        },
        "big_sur": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/jpeg-archive/blobs/sha256:41ac0d9c5bd290d77e7e5548a2257c6455f9f87265b06b5dc4e02ac7836dfc22",
          "sha256": "41ac0d9c5bd290d77e7e5548a2257c6455f9f87265b06b5dc4e02ac7836dfc22"
        },
        "catalina": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/jpeg-archive/blobs/sha256:222d7258f63f000794693bc5912c88ce42d0a33473a8acbbc585821655c9b8dd",
          "sha256": "222d7258f63f000794693bc5912c88ce42d0a33473a8acbbc585821655c9b8dd"
        },
        "mojave": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/jpeg-archive/blobs/sha256:2df1b3a007b7553addc977582d0c38d5007892f9e8a866a4fc9cda9b8f3b2af2",
          "sha256": "2df1b3a007b7553addc977582d0c38d5007892f9e8a866a4fc9cda9b8f3b2af2"
        },
        "high_sierra": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/jpeg-archive/blobs/sha256:6f873847a8c7ad6420fe7700219ae13be39d12075c92921b364cb059ed5bf552",
          "sha256": "6f873847a8c7ad6420fe7700219ae13be39d12075c92921b364cb059ed5bf552"
        },
        "x86_64_linux": {
          "cellar": ":any_skip_relocation",
          "url": "https://ghcr.io/v2/homebrew/core/jpeg-archive/blobs/sha256:620b18311f4e6b970b2b9ae2c2cd6ee5625a791f158b3c2f219e617920d94796",
          "sha256": "620b18311f4e6b970b2b9ae2c2cd6ee5625a791f158b3c2f219e617920d94796"
        }
      }
    }
  },
  "keg_only": false,
  "keg_only_reason": null,
  "options": [],
  "build_dependencies": [],
  "dependencies": [
    "mozjpeg"
  ],
  "test_dependencies": [],
  "recommended_dependencies": [],
  "optional_dependencies": [],
  "uses_from_macos": [],
  "uses_from_macos_bounds": [],
  "requirements": [],
  "conflicts_with": [],
  "conflicts_with_reasons": [],
  "link_overwrite": [],
  "caveats": null,
  "installed": [],
  "linked_keg": null,
  "pinned": false,
  "outdated": false,
  "deprecated": false,
  "deprecation_date": null,
  "deprecation_reason": null,
  "disabled": false,
  "disable_date": null,
  "disable_reason": null,
  "post_install_defined": false,
  "service": null,
  "tap_git_head": "4eeae4ea50839e967536ba646d5e0ed6fbcbad7f",
  "ruby_source_path": "Formula/jpeg-archive.rb",
  "ruby_source_checksum": {
    "sha256": "9a32dad71627109e10ee710dca9bd73f402a134db8f769e397411d750bcb9778"
  },
  "date_added": "2015-04-24T10:24:36+01:00",
  "readme": "JPEG Archive [![Build Status](http://img.shields.io/travis/danielgtaylor/jpeg-archive.svg?style=flat)](https://travis-ci.org/danielgtaylor/jpeg-archive) [![Build status](https://ci.appveyor.com/api/projects/status/1p7hrrq380xuqlyh?svg=true)](https://ci.appveyor.com/project/danielgtaylor/jpeg-archive) [![Version](http://img.shields.io/badge/version-2.2.0-blue.svg?style=flat)](https://github.com/danielgtaylor/jpeg-archive/releases) [![License](http://img.shields.io/badge/license-MIT-red.svg?style=flat)](http://dgt.mit-license.org/)\n============\nUtilities for archiving photos for saving to long term storage or serving over the web. The goals are:\n\n * Use a common, well supported format (JPEG)\n * Minimize storage space and cost\n * Identify duplicates / similar photos\n\nApproach:\n\n * Command line utilities and scripts\n * Simple options and useful help\n * Good quality output via sane defaults\n\nContributions to this project are very welcome.\n\nDownload\n--------\nYou can download the latest source and binary releases from the [JPEG Archive releases page](https://github.com/danielgtaylor/jpeg-archive/releases). Windows binaries for the latest commit are available from the [Windows CI build server](https://ci.appveyor.com/project/danielgtaylor/jpeg-archive/build/artifacts).\n\nIf you are looking for an easy way to run these utilities in parallel over many files to utilize all CPU cores, please also download [Ladon](https://github.com/danielgtaylor/ladon) or [GNU Parallel](https://www.gnu.org/software/parallel/). You can then use the `jpeg-archive` command below or use `ladon` directly. Example:\n\n```bash\n# Re-compress JPEGs and replace the originals\nladon \"Photos/**/*.jpg\" -- jpeg-recompress FULLPATH FULLPATH\n\n# Re-compress JPEGs into the new directory 'Comp'\nladon -m Comp/RELDIR \"Photos/**/*.jpg\" -- jpeg-recompress FULLPATH Comp/RELPATH\n```\n\nUtilities\n---------\nThe following utilities are part of this project. All of them accept a `--help` parameter to see the available options.\n\n### jpeg-archive\nCompress RAW and JPEG files in a folder utilizing all CPU cores. This is a simple shell script that uses the utilities below. It requires:\n\n* a POSIX-compatible shell such as Bash\n* [Ladon](https://github.com/danielgtaylor/ladon) or [GNU Parallel](https://www.gnu.org/software/parallel/)\n* [dcraw](http://www.cybercom.net/~dcoffin/dcraw/)\n* [exiftool](http://www.sno.phy.queensu.ca/~phil/exiftool/)\n* jpeg-recompress (part of this project)\n\n```bash\n# Compress a folder of images\ncd path/to/photos\njpeg-archive\n\n# Custom quality and metric\njpeg-archive --quality medium --method smallfry\n```\n\n### jpeg-recompress\nCompress JPEGs by re-encoding to the smallest JPEG quality while keeping _perceived_ visual quality the same and by making sure huffman tables are optimized. This is a __lossy__ operation, but the images are visually identical and it usually saves 30-70% of the size for JPEGs coming from a digital camera, particularly DSLRs. By default all EXIF/IPTC/XMP and color profile metadata is copied over, but this can be disabled to save more space if desired.\n\nThere is no need for the input file to be a JPEG. In fact, you can use `jpeg-recompress` as a replacement for `cjpeg` by using PPM input and the `--ppm` option.\n\nThe better the quality of the input image is, the better the output will be.\n\nSome basic photo-related editing options are available, such as removing fisheye lens distortion.\n\n#### Demo\nBelow are two 100% crops of [Nikon's D3x Sample Image 2](http://static.nikonusa.com/D3X_gallery/index.html). The left shows the original image from the camera, while the others show the output of `jpeg-recompress` with the `medium` quality setting and various comparison methods. By default SSIM is used, which lowers the file size by **88%**. The recompression algorithm chooses a JPEG quality of 80. By comparison the `veryhigh` quality setting chooses a JPEG quality of 93 and saves 70% of the file size.\n\n![JPEG recompression comparison](https://cloud.githubusercontent.com/assets/106826/3633843/5fde26b6-0eff-11e4-8c98-f18dbbf7b510.png)\n\nWhy are they different sizes? The default quality settings are set to average out to similar visual quality over large data sets. They may differ on individual photos (like above) because each metric considers different parts of the image to be more or less important for compression.\n\n#### Image Comparison Metrics\nThe following metrics are available when using `jpeg-recompress`. SSIM is the default.\n\nName     | Option        | Description\n-------- | ------------- | -----------\nMPE      | `-m mpe`      | Mean pixel error (as used by [imgmin](https://github.com/rflynn/imgmin))\nSSIM     | `-m ssim`     | [Structural similarity](http://en.wikipedia.org/wiki/Structural_similarity) **DEFAULT**\nMS-SSIM* | `-m ms-ssim`  | Multi-scale structural similarity (slow!) ([2008 paper](https://doi.org/10.1117/12.768060))\nSmallFry | `-m smallfry` | Linear-weighted BBCQ-like ([original project](https://github.com/dwbuiten/smallfry), [2011 BBCQ paper](http://spie.org/Publications/Proceedings/Paper/10.1117/12.872231))\n\n**Note**: The SmallFry algorithm may be [patented](http://www.jpegmini.com/main/technology) so use with caution.\n\n#### Subsampling\nThe JPEG format allows for subsampling of the color channels to save space. For each 2x2 block of pixels per color channel (four pixels total) it can store four pixels (all of them), two pixels or a single pixel. By default, the JPEG encoder subsamples the non-luma channels to two pixels (often referred to as 4:2:0 subsampling). Most digital cameras do the same because of limitations in the human eye. This may lead to unintended behavior for specific use cases (see [#12](https://github.com/danielgtaylor/jpeg-archive/issues/12) for an example), so you can use `--subsample disable` to disable this subsampling.\n\n#### Example Commands\n\n```bash\n# Default settings\njpeg-recompress image.jpg compressed.jpg\n\n# High quality example settings\njpeg-recompress --quality high --min 60 image.jpg compressed.jpg\n\n# Slow high quality settings (3-4x slower than above, slightly more accurate)\njpeg-recompress --accurate --quality high --min 60 image.jpg compressed.jpg\n\n# Use SmallFry instead of SSIM\njpeg-recompress --method smallfry image.jpg compressed.jpg\n\n# Use 4:4:4 sampling (disables subsampling).\njpeg-recompress --subsample disable image.jpg compressed.jpg\n\n# Remove fisheye distortion (Tokina 10-17mm on APS-C @ 10mm)\njpeg-recompress --defish 2.6 --zoom 1.2 image.jpg defished.jpg\n\n# Read from stdin and write to stdout with '-' as the filename\njpeg-recompress - - <image.jpg >compressed.jpg\n\n# Convert RAW to JPEG via PPM from stdin\ndcraw -w -q 3 -c IMG_1234.CR2 | jpeg-recompress --ppm - compressed.jpg\n\n# Disable progressive mode (not recommended)\njpeg-recompress --no-progressive image.jpg compressed.jpg\n\n# Disable all output except for errors\njpeg-recompress --quiet image.jpg compressed.jpg\n```\n\n### jpeg-compare\nCompare two JPEG photos to judge how similar they are. The `fast` comparison method returns an integer from 0 to 99, where 0 is identical. PSNR, SSIM, and MS-SSIM return floats but require images to be the same dimensions.\n\n```bash\n# Do a fast compare of two images\njpeg-compare image1.jpg image2.jpg\n\n# Calculate PSNR\njpeg-compare --method psnr image1.jpg image2.jpg\n\n# Calculate SSIM\njpeg-compare --method ssim image1.jpg image2.jpg\n```\n\n### jpeg-hash\nCreate a hash of an image that can be used to compare it to other images quickly.\n\n```bash\njpeg-hash image.jpg\n```\n\nBuilding\n--------\n### Dependencies\n * [mozjpeg](https://github.com/mozilla/mozjpeg)\n\n#### Ubuntu\nUbuntu users can install via `apt-get`:\n\n```bash\nsudo apt-get install build-essential autoconf pkg-config nasm libtool\ngit clone https://github.com/mozilla/mozjpeg.git\ncd mozjpeg\nautoreconf -fiv\n./configure --with-jpeg8\nmake\nsudo make install\n```\n\n#### Mac OS X\nMac users can install it via [Homebrew](http://brew.sh/):\n\n```bash\nbrew install mozjpeg\n```\n\n#### FreeBSD\n\n```bash\npkg install mozjpeg\ngit clone https://github.com/danielgtaylor/jpeg-archive.git\ncd jpeg-archive/\ngmake\nsudo gmake install\n```\n\n#### Windows\nThe `Makefile` should work with MinGW/Cygwin/etc and standard GCC. Patches welcome.\n\nTo get everything you need to build, install these:\n\n* [CMake](https://cmake.org/download/)\n* [NASM](https://www.nasm.us/)\n* [MinGW](https://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Personal%20Builds/mingw-builds/installer/mingw-w64-install.exe/download) (installed to e.g. `C:\\mingw`)\n* [Github for Windows](https://windows.github.com/)\n\nRun Github for windows. In the settings, set **Git Bash** as the shell. Open Git Shell from the start menu.\n\n```bash\n# Update PATH to include MinGW/NASM bin folder, location on your system may vary\nexport PATH=/c/mingw/mingw32/bin:/c/Program\\ Files \\(x68\\)/nasm:$PATH\n\n# Build mozjpeg or download https://www.dropbox.com/s/98jppfgds2xjblu/libjpeg.a\ngit clone https://github.com/mozilla/mozjpeg.git\ncd mozjpeg\ncmake -G \"MSYS Makefiles\" -D CMAKE_C_COMPILER=gcc.exe -D CMAKE_MAKE_PROGRAM=mingw32-make.exe  -D WITH_JPEG8=1\nmingw32-make\ncd ..\n\n# Build jpeg-archive\ngit clone https://github.com/danielgtaylor/jpeg-archive\ncd jpeg-archive\nCC=gcc mingw32-make\n```\n\nJPEG-Archive should now be built.\n\n### Compiling (Linux and Mac OS X)\nThe `Makefile` should work as-is on Ubuntu and Mac OS X. Other platforms may need to set the location of `libjpeg.a` or make other tweaks.\n\n```bash\nmake\n```\n\n### Installation\nInstall the binaries into `/usr/local/bin`:\n\n```bash\nsudo make install\n```\n\nLinks / Alternatives\n--------------------\n* https://github.com/rflynn/imgmin\n* https://news.ycombinator.com/item?id=803839\n\nLicense\n-------\n* JPEG-Archive is copyright &copy; 2015 Daniel G. Taylor\n* Image Quality Assessment (IQA) is copyright 2011, Tom Distler (http://tdistler.com)\n* SmallFry is copyright 2014, Derek Buitenhuis (https://github.com/dwbuiten)\n\nAll are released under an MIT license.\n\nhttp://dgt.mit-license.org/"
}
